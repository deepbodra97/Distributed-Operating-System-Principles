function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(this);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT;a=self;b=a.Client=a.Client||{};c=b.Client=b.Client||{};d=a.GeneratedPrintf=a.GeneratedPrintf||{};e=a.Client_Templates=a.Client_Templates||{};f=a.WebSharper=a.WebSharper||{};g=f.Obj=f.Obj||{};h=f.UI=f.UI||{};i=h.Var$1=h.Var$1||{};j=f.Operators=f.Operators||{};k=h.Templating=h.Templating||{};l=k.Runtime=k.Runtime||{};m=l.Server=l.Server||{};n=m.TemplateInstance=m.TemplateInstance||{};o=f.Arrays=f.Arrays||{};p=m.ProviderBuilder=m.ProviderBuilder||{};q=f.Unchecked=f.Unchecked||{};r=h.Var=h.Var||{};s=h.ConcreteVar=h.ConcreteVar||{};t=h.Snap=h.Snap||{};u=a.System=a.System||{};v=u.Guid=u.Guid||{};w=f.Collections=f.Collections||{};x=w.List=w.List||{};y=m.Handler=m.Handler||{};z=h.Client=h.Client||{};A=z.Templates=z.Templates||{};B=h.Doc=h.Doc||{};C=f.JavaScript=f.JavaScript||{};D=C.Pervasives=C.Pervasives||{};E=f.ClientSideJson=f.ClientSideJson||{};F=E.Provider=E.Provider||{};G=h.Abbrev=h.Abbrev||{};H=G.Fresh=G.Fresh||{};I=w.Dictionary=w.Dictionary||{};J=w.HashSet=w.HashSet||{};K=f.Seq=f.Seq||{};L=m.TemplateInitializer=m.TemplateInitializer||{};M=a.EventTarget;N=a.Node;O=C.JS=C.JS||{};P=f.Concurrency=f.Concurrency||{};Q=h.View=h.View||{};R=f.Numeric=f.Numeric||{};S=a.Object;T=h.AttrProxy=h.AttrProxy||{};U=h.CheckedInput=h.CheckedInput||{};V=w.DictionaryUtil=w.DictionaryUtil||{};W=f.Enumerator=f.Enumerator||{};X=W.T=W.T||{};Y=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};Z=a.WindowOrWorkerGlobalScope;_0=h.Docs=h.Docs||{};_1=P.AsyncBody=P.AsyncBody||{};_2=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};_3=h.DocElemNode=h.DocElemNode||{};_4=a.CharacterData;_5=h.Elt=h.Elt||{};_6=A.Prepare=A.Prepare||{};_7=f.Slice=f.Slice||{};_8=h.DomUtility=h.DomUtility||{};_9=w.KeyCollection=w.KeyCollection||{};_=h.An=h.An||{};$=z.Settings=z.Settings||{};ba=G.Mailbox=G.Mailbox||{};bb=P.CT=P.CT||{};bc=P.Scheduler=P.Scheduler||{};bd=z.Attrs=z.Attrs||{};be=bd.Dyn=bd.Dyn||{};bf=h.Attrs=h.Attrs||{};bg=h.AttrModule=h.AttrModule||{};bh=f.List=f.List||{};bi=bh.T=bh.T||{};bj=f.Strings=f.Strings||{};bk=h.Array=h.Array||{};bl=h.Updates=h.Updates||{};bm=w.ValueCollection=w.ValueCollection||{};bn=z.Docs=z.Docs||{};bo=bn.RunState=bn.RunState||{};bp=bn.NodeSet=bn.NodeSet||{};bq=h.Anims=h.Anims||{};br=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bs=a.Error;bt=f.OperationCanceledException=f.OperationCanceledException||{};bu=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bv=w.HashSetUtil=w.HashSetUtil||{};bw=h.BindVar=h.BindVar||{};bx=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};by=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bz=h.AppendList=h.AppendList||{};bA=f.CancellationTokenSource=f.CancellationTokenSource||{};bB=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bC=h.DynamicAttrNode=h.DynamicAttrNode||{};bD=h.Easing=h.Easing||{};bE=G.HashSet=G.HashSet||{};bF=h.String=h.String||{};bG=bn.DomNodes=bn.DomNodes||{};bH=f.Char=f.Char||{};bI=f.Lazy=f.Lazy||{};bJ=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bK=f.Queue=f.Queue||{};bL=f.LazyExtensionsProxy=f.LazyExtensionsProxy||{};bM=bL.LazyRecord=bL.LazyRecord||{};bN=a.console;bO=a.JSON;bP=a.jQuery;bQ=a.IntelliFactory;bR=bQ&&bQ.Runtime;bS=a.Math;bT=a.Date;c.Main=function(){var bU,bV,bW,bX,bY;(function(bZ){return bZ("MAIN");}(function(bZ){bN.log(bZ);}));bU=c.PostBlogArticle({id:"",reId:"",text:"client",tType:"tweet",by:"deep"});((function(bZ){return function(b0){return bZ("response="+d.p(b0));};}(function(bZ){bN.log(bZ);}))(bU));i.Create$1("");bV=(bW=new p.New$1(),(bX=y.CompleteHoles(bW.k,bW.h,[["name",0]]),(bY=new n.New(bX[1],e.main(bX[0])),bW.i=bY,bY))).get_Doc();A.LoadLocalTemplates("");B.RunById("main",bV);};c.PostBlogArticle=function(bU){var bV;bV=null;return P.Delay(function(){return P.Bind(c.Ajax("POST","http://localhost:5000/api/tweets",bU),function(bW){return P.Return(((F.Id())())(bO.parse(bW)));});});};c.Ajax=function(bU,bV,bW){function bX(bY,bZ){var b0;bP.ajax((b0={},b0.url=bV,b0.type=bU,b0.contentType="application/json",b0.dataType="text",b0.data=bW,b0.success=function(b1){return bY(b1);},b0.error=function(){return bZ(new bs("Error"));},b0));}return P.FromContinuations(function(bY,bZ,b0){return bX.apply(null,[bY,bZ,b0]);});};d.p=function(bU){return"{Invoke = <fun>}";};e.main=function(bU){A.LoadLocalTemplates("index");return bU?A.NamedTemplate("index",{$:1,$0:"main"},bU):void 0;};g=f.Obj=bR.Class({Equals:function(bU){return this===bU;},GetHashCode:function(){return -1;}},null,g);g.New=bR.Ctor(function(){},g);i=h.Var$1=bR.Class({},g,i);i.Create$1=function(bU){return new s.New(false,t.New({$:2,$0:bU,$1:[]}),bU);};j.FailWith=function(bU){throw new bs(bU);};j.KeyValue=function(bU){return[bU.K,bU.V];};n=m.TemplateInstance=bR.Class({get_Doc:function(){return this.doc;}},g,n);n.New=bR.Ctor(function(bU,bV){g.New.call(this);this.doc=bV;this.allVars=bU.$==0?bU.$0:j.FailWith("Should not happen");},n);o.get=function(bU,bV){o.checkBounds(bU,bV);return bU[bV];};o.set=function(bU,bV,bW){o.checkBounds(bU,bV);bU[bV]=bW;};o.checkBounds=function(bU,bV){if(bV<0||bV>=bU.length)j.FailWith("Index was outside the bounds of the array.");};o.length=function(bU){return bU.dims===2?bU.length*bU.length:bU.length;};p=m.ProviderBuilder=bR.Class({},g,p);p.New$1=bR.Ctor(function(){var bU;g.New.call(this);this.i=null;this.k=(bU=v.NewGuid(),a.String(bU));this.h=[];bR.SetOptional(this,"s",null);},p);q.Equals=function(bU,bV){var bW,bX,bY,bZ;if(bU===bV)return true;else{bW=typeof bU;if(bW=="object"){if(bU===null||bU===void 0||bV===null||bV===void 0)return false;else if("Equals"in bU)return bU.Equals(bV);else if(bU instanceof a.Array&&bV instanceof a.Array)return q.arrayEquals(bU,bV);else if(bU instanceof a.Date&&bV instanceof a.Date)return q.dateEquals(bU,bV);else{bX=[true];for(var b0 in bU)if(function(b1){bX[0]=!bU.hasOwnProperty(b1)||bV.hasOwnProperty(b1)&&q.Equals(bU[b1],bV[b1]);return!bX[0];}(b0))break;if(bX[0]){for(var b1 in bV)if(function(b2){bX[0]=!bV.hasOwnProperty(b2)||bU.hasOwnProperty(b2);return!bX[0];}(b1))break;}return bX[0];}}else return bW=="function"&&("$Func"in bU?bU.$Func===bV.$Func&&bU.$Target===bV.$Target:"$Invokes"in bU&&"$Invokes"in bV&&q.arrayEquals(bU.$Invokes,bV.$Invokes));}};q.arrayEquals=function(bU,bV){var bW,bX;if(o.length(bU)===o.length(bV)){bW=true;bX=0;while(bW&&bX<o.length(bU)){!q.Equals(o.get(bU,bX),o.get(bV,bX))?bW=false:void 0;bX=bX+1;}return bW;}else return false;};q.dateEquals=function(bU,bV){return bU.getTime()===bV.getTime();};q.Hash=function(bU){var bV;bV=typeof bU;return bV=="function"?0:bV=="boolean"?bU?1:0:bV=="number"?bU:bV=="string"?q.hashString(bU):bV=="object"?bU==null?0:bU instanceof a.Array?q.hashArray(bU):q.hashObject(bU):0;};q.hashString=function(bU){var bV,bW,bX;if(bU===null)return 0;else{bV=5381;for(bW=0,bX=bU.length-1;bW<=bX;bW++)bV=q.hashMix(bV,bU[bW].charCodeAt());return bV;}};q.hashArray=function(bU){var bV,bW,bX;bV=-34948909;for(bW=0,bX=o.length(bU)-1;bW<=bX;bW++)bV=q.hashMix(bV,q.Hash(o.get(bU,bW)));return bV;};q.hashObject=function(bU){var bV,bW;if("GetHashCode"in bU)return bU.GetHashCode();else{bV=[0];for(var bX in bU)if(function(bY){bV[0]=q.hashMix(q.hashMix(bV[0],q.hashString(bY)),q.Hash(bU[bY]));return false;}(bX))break;return bV[0];}};q.hashMix=function(bU,bV){return(bU<<5)+bU+bV;};q.Compare=function(bU,bV){var bW,bX,bY,bZ,b0,b1;if(bU===bV)return 0;else{bX=typeof bU;switch(bX=="function"?1:bX=="boolean"?2:bX=="number"?2:bX=="string"?2:bX=="object"?3:0){case 0:return typeof bV=="undefined"?0:-1;case 1:return j.FailWith("Cannot compare function values.");case 2:return bU<bV?-1:1;case 3:if(bU===null)bY=-1;else if(bV===null)bY=1;else if("CompareTo"in bU)bY=bU.CompareTo(bV);else if("CompareTo0"in bU)bY=bU.CompareTo0(bV);else if(bU instanceof a.Array&&bV instanceof a.Array)bY=q.compareArrays(bU,bV);else if(bU instanceof a.Date&&bV instanceof a.Date)bY=q.compareDates(bU,bV);else{bZ=[0];for(var b2 in bU)if(function(b3){return!bU.hasOwnProperty(b3)?false:!bV.hasOwnProperty(b3)?(bZ[0]=1,true):(bZ[0]=q.Compare(bU[b3],bV[b3]),bZ[0]!==0);}(b2))break;if(bZ[0]===0){for(var b3 in bV)if(function(b4){return!bV.hasOwnProperty(b4)?false:!bU.hasOwnProperty(b4)&&(bZ[0]=-1,true);}(b3))break;}bY=bZ[0];}return bY;}}};q.compareArrays=function(bU,bV){var bW,bX;if(o.length(bU)<o.length(bV))return -1;else if(o.length(bU)>o.length(bV))return 1;else{bW=0;bX=0;while(bW===0&&bX<o.length(bU)){bW=q.Compare(o.get(bU,bX),o.get(bV,bX));bX=bX+1;}return bW;}};q.compareDates=function(bU,bV){return q.Compare(bU.getTime(),bV.getTime());};r=h.Var=bR.Class({},g,r);r.New=bR.Ctor(function(){g.New.call(this);},r);s=h.ConcreteVar=bR.Class({get_View:function(){return this.view;},Get:function(){return this.current;},Set:function(bU){if(this.isConst)(function(bV){return bV("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bV){bN.log(bV);}));else{t.Obsolete(this.snap);this.current=bU;this.snap=t.New({$:2,$0:bU,$1:[]});}},UpdateMaybe:function(bU){var bV;bV=bU(this.Get());bV!=null&&bV.$==1?this.Set(bV.$0):void 0;}},r,s);s.New=bR.Ctor(function(bU,bV,bW){var bX;bX=this;r.New.call(this);this.isConst=bU;this.current=bW;this.snap=bV;this.view=function(){return bX.snap;};this.id=H.Int();},s);t.WhenRun=function(bU,bV,bW){var bX;bX=bU.s;bX==null?bW():bX!=null&&bX.$==2?(bX.$1.push(bW),bV(bX.$0)):bX!=null&&bX.$==3?(bX.$0.push(bV),bX.$1.push(bW)):bV(bX.$0);};t.Map=function(bU,bV){var bW,bX;bW=bV.s;return bW!=null&&bW.$==0?t.New({$:0,$0:bU(bW.$0)}):(bX=t.New({$:3,$0:[],$1:[]}),(t.When(bV,function(bY){t.MarkDone(bX,bV,bU(bY));},bX),bX));};t.Map3=function(bU,bV,bW,bX){var bY,bZ,b0,b1;function b2(b3){var b4,b5,b6,b7;if(!(b4=b1.s,b4!=null&&b4.$==0||b4!=null&&b4.$==2)){b5=t.ValueAndForever(bV);b6=t.ValueAndForever(bW);b7=t.ValueAndForever(bX);b5!=null&&b5.$==1?b6!=null&&b6.$==1?b7!=null&&b7.$==1?b5.$0[1]&&b6.$0[1]&&b7.$0[1]?t.MarkForever(b1,bU(b5.$0[0],b6.$0[0],b7.$0[0])):t.MarkReady(b1,bU(b5.$0[0],b6.$0[0],b7.$0[0])):void 0:void 0:void 0;}}bY=bV.s;bZ=bW.s;b0=bX.s;return bY!=null&&bY.$==0?bZ!=null&&bZ.$==0?b0!=null&&b0.$==0?t.New({$:0,$0:bU(bY.$0,bZ.$0,b0.$0)}):t.Map3Opt1(bU,bY.$0,bZ.$0,bX):b0!=null&&b0.$==0?t.Map3Opt2(bU,bY.$0,b0.$0,bW):t.Map3Opt3(bU,bY.$0,bW,bX):bZ!=null&&bZ.$==0?b0!=null&&b0.$==0?t.Map3Opt4(bU,bZ.$0,b0.$0,bV):t.Map3Opt5(bU,bZ.$0,bV,bX):b0!=null&&b0.$==0?t.Map3Opt6(bU,b0.$0,bV,bW):(b1=t.New({$:3,$0:[],$1:[]}),(t.When(bV,b2,b1),t.When(bW,b2,b1),t.When(bX,b2,b1),b1));};t.Sequence=function(bU){var bV,bW,bX;function bY(bZ){var b0;if(bX[0]===0){b0=o.map(function(b1){var b2;b2=b1.s;return b2!=null&&b2.$==0?b2.$0:b2!=null&&b2.$==2?b2.$0:j.FailWith("value not found by View.Sequence");},bV);o.forall(function(b1){var b2;b2=b1.s;return b2!=null&&b2.$==0;},bV)?t.MarkForever(bW,b0):t.MarkReady(bW,b0);}else bX[0]--;}bV=o.ofSeq(bU);return bV.length==0?t.New({$:0,$0:[]}):(bW=t.New({$:3,$0:[],$1:[]}),(bX=[o.length(bV)-1],(o.iter(function(bZ){t.When(bZ,bY,bW);},bV),bW)));};t.Map2=function(bU,bV,bW){var bX,bY,bZ;function b0(b1){var b2,b3,b4;if(!(b2=bZ.s,b2!=null&&b2.$==0||b2!=null&&b2.$==2)){b3=t.ValueAndForever(bV);b4=t.ValueAndForever(bW);b3!=null&&b3.$==1?b4!=null&&b4.$==1?b3.$0[1]&&b4.$0[1]?t.MarkForever(bZ,bU(b3.$0[0],b4.$0[0])):t.MarkReady(bZ,bU(b3.$0[0],b4.$0[0])):void 0:void 0;}}bX=bV.s;bY=bW.s;return bX!=null&&bX.$==0?bY!=null&&bY.$==0?t.New({$:0,$0:bU(bX.$0,bY.$0)}):t.Map2Opt1(bU,bX.$0,bW):bY!=null&&bY.$==0?t.Map2Opt2(bU,bY.$0,bV):(bZ=t.New({$:3,$0:[],$1:[]}),(t.When(bV,b0,bZ),t.When(bW,b0,bZ),bZ));};t.Map2Unit=function(bU,bV){var bW,bX,bY;function bZ(){var b0,b1,b2;if(!(b0=bY.s,b0!=null&&b0.$==0||b0!=null&&b0.$==2)){b1=t.ValueAndForever(bU);b2=t.ValueAndForever(bV);b1!=null&&b1.$==1?b2!=null&&b2.$==1?b1.$0[1]&&b2.$0[1]?t.MarkForever(bY,null):t.MarkReady(bY,null):void 0:void 0;}}bW=bU.s;bX=bV.s;return bW!=null&&bW.$==0?bX!=null&&bX.$==0?t.New({$:0,$0:null}):bV:bX!=null&&bX.$==0?bU:(bY=t.New({$:3,$0:[],$1:[]}),(t.When(bU,bZ,bY),t.When(bV,bZ,bY),bY));};t.Copy=function(bU){var bV,bW,bX;bV=bU.s;return bV==null?bU:bV!=null&&bV.$==2?(bW=t.New({$:2,$0:bV.$0,$1:[]}),(t.WhenObsolete(bU,bW),bW)):bV!=null&&bV.$==3?(bX=t.New({$:3,$0:[],$1:[]}),(t.When(bU,function(bY){t.MarkDone(bX,bU,bY);},bX),bX)):bU;};t.WhenObsoleteRun=function(bU,bV){var bW;bW=bU.s;bW==null?bV():bW!=null&&bW.$==2?bW.$1.push(bV):bW!=null&&bW.$==3?bW.$1.push(bV):void 0;};t.When=function(bU,bV,bW){var bX;bX=bU.s;bX==null?t.Obsolete(bW):bX!=null&&bX.$==2?(t.EnqueueSafe(bX.$1,bW),bV(bX.$0)):bX!=null&&bX.$==3?(bX.$0.push(bV),t.EnqueueSafe(bX.$1,bW)):bV(bX.$0);};t.MarkDone=function(bU,bV,bW){var bX;if(bX=bV.s,bX!=null&&bX.$==0)t.MarkForever(bU,bW);else t.MarkReady(bU,bW);};t.Map3Opt1=function(bU,bV,bW,bX){return t.Map(function(bY){return bU(bV,bW,bY);},bX);};t.Map3Opt2=function(bU,bV,bW,bX){return t.Map(function(bY){return bU(bV,bY,bW);},bX);};t.Map3Opt3=function(bU,bV,bW,bX){return t.Map2(function(bY,bZ){return bU(bV,bY,bZ);},bW,bX);};t.Map3Opt4=function(bU,bV,bW,bX){return t.Map(function(bY){return bU(bY,bV,bW);},bX);};t.Map3Opt5=function(bU,bV,bW,bX){return t.Map2(function(bY,bZ){return bU(bY,bV,bZ);},bW,bX);};t.Map3Opt6=function(bU,bV,bW,bX){return t.Map2(function(bY,bZ){return bU(bY,bZ,bV);},bW,bX);};t.ValueAndForever=function(bU){var bV;bV=bU.s;return bV!=null&&bV.$==0?{$:1,$0:[bV.$0,true]}:bV!=null&&bV.$==2?{$:1,$0:[bV.$0,false]}:null;};t.MarkForever=function(bU,bV){var bW,bX,bY,bZ;bW=bU.s;if(bW!=null&&bW.$==3){bU.s={$:0,$0:bV};bX=bW.$0;for(bY=0,bZ=o.length(bX)-1;bY<=bZ;bY++)(o.get(bX,bY))(bV);}else void 0;};t.MarkReady=function(bU,bV){var bW,bX,bY,bZ;bW=bU.s;if(bW!=null&&bW.$==3){bU.s={$:2,$0:bV,$1:bW.$1};bX=bW.$0;for(bY=0,bZ=o.length(bX)-1;bY<=bZ;bY++)(o.get(bX,bY))(bV);}else void 0;};t.Map2Opt1=function(bU,bV,bW){return t.Map(function(bX){return bU(bV,bX);},bW);};t.Map2Opt2=function(bU,bV,bW){return t.Map(function(bX){return bU(bX,bV);},bW);};t.WhenObsolete=function(bU,bV){var bW;bW=bU.s;bW==null?t.Obsolete(bV):bW!=null&&bW.$==2?t.EnqueueSafe(bW.$1,bV):bW!=null&&bW.$==3?t.EnqueueSafe(bW.$1,bV):void 0;};t.EnqueueSafe=function(bU,bV){var bW,bX,bY,bZ;bU.push(bV);if(bU.length%20===0){bW=bU.slice(0);bK.Clear(bU);for(bX=0,bY=o.length(bW)-1;bX<=bY;bX++){bZ=o.get(bW,bX);typeof bZ=="object"?function(b0){if(b0.s)bU.push(b0);}(bZ):function(b0){bU.push(b0);}(bZ);}}else void 0;};v.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bU){var bV,bW;bV=bS.random()*16|0;bW=bU=="x"?bV:bV&3|8;return bW.toString(16);});};x=w.List=bR.Class({GetEnumerator:function(){return W.Get(this);},GetEnumerator0:function(){return W.Get0(this);}},null,x);y.CompleteHoles=function(bU,bV,bW){var bY,bZ,b0,b1,b2;function bX(b3,b4){var b5;return bZ.Contains(b3)?null:(b5=b4===0?L.GetOrAddHoleFor(bU,b3,function(){return{$:8,$0:b3,$1:i.Create$1("")};}):b4===1?L.GetOrAddHoleFor(bU,b3,function(){return{$:13,$0:b3,$1:i.Create$1(0)};}):b4===2?L.GetOrAddHoleFor(bU,b3,function(){return{$:9,$0:b3,$1:i.Create$1(false)};}):j.FailWith("Invalid value type"),(bY.set_Item(b3,b5),{$:1,$0:b5}));}bY=new I.New$5();bZ=new J.New$3();b0=W.Get(bV);try{while(b0.MoveNext()){b1=b0.Current();b2=b1.$0;bZ.Add(b2);bY.set_Item(b2,b1);}}finally{if(typeof b0=="object"&&"Dispose"in b0)b0.Dispose();}return[K.append(bV,o.choose(function(b3){return bX(b3[0],b3[1]);},bW)),{$:0,$0:bY}];};A.LoadLocalTemplates=function(bU){!A.LocalTemplatesLoaded()?(A.set_LocalTemplatesLoaded(true),A.LoadNestedTemplates(self.document.body,"")):void 0;A.LoadedTemplates().set_Item(bU,A.LoadedTemplateFile(""));};A.NamedTemplate=function(bU,bV,bW){var bX,bY;bX=(bY=null,[A.LoadedTemplateFile(bU).TryGetValue(bV==null?"":bV.$0,{get:function(){return bY;},set:function(bZ){bY=bZ;}}),bY]);return bX[0]?A.ChildrenTemplate(bX[1].cloneNode(true),bW):(bN.warn("Local template doesn't exist",bV),B.get_Empty());};A.LocalTemplatesLoaded=function(){Y.$cctor();return Y.LocalTemplatesLoaded;};A.set_LocalTemplatesLoaded=function(bU){Y.$cctor();Y.LocalTemplatesLoaded=bU;};A.LoadNestedTemplates=function(bU,bV){var bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9;function bW(b_){var b$,ca;if(!bX.ContainsKey(b_)){b$=(ca=null,[bY.TryGetValue(b_,{get:function(){return ca;},set:function(cb){ca=cb;}}),ca]);b$[0]?(b9.Add(b_),bY.Remove(b_),A.PrepareTemplateStrict(bV,{$:1,$0:b_},b$[1],{$:1,$0:bW})):bN.warn(b9.Contains(b_)?"Encountered loop when instantiating "+b_:"Local template does not exist: "+b_);}}bX=A.LoadedTemplateFile(bV);bY=new I.New$5();bZ=bU.querySelectorAll("[ws-template]");for(b0=0,b1=bZ.length-1;b0<=b1;b0++){b2=bZ[b0];b3=b2.getAttribute("ws-template").toLowerCase();b2.removeAttribute("ws-template");bY.set_Item(b3,A.FakeRootSingle(b2));}b4=bU.querySelectorAll("[ws-children-template]");for(b5=0,b6=b4.length-1;b5<=b6;b5++){b7=b4[b5];b8=b7.getAttribute("ws-children-template").toLowerCase();b7.removeAttribute("ws-children-template");bY.set_Item(b8,A.FakeRoot(b7));}b9=new J.New$3();while(bY.count>0)bW(K.head(bY.get_Keys()));};A.LoadedTemplates=function(){Y.$cctor();return Y.LoadedTemplates;};A.LoadedTemplateFile=function(bU){var bV,bW,bX;bV=(bW=null,[A.LoadedTemplates().TryGetValue(bU,{get:function(){return bW;},set:function(bY){bW=bY;}}),bW]);return bV[0]?bV[1]:(bX=new I.New$5(),(A.LoadedTemplates().set_Item(bU,bX),bX));};A.ChildrenTemplate=function(bU,bV){var bW,bX,bY,bZ,b0;bW=A.InlineTemplate(bU,K.append(bV,A.GlobalHoles().get_Values()));bX=bW[1];bY=bW[0];bZ=bY.Els;return!q.Equals(bZ,null)&&bZ.length===1&&(o.get(bZ,0)instanceof N&&(q.Equals(o.get(bZ,0).nodeType,N.ELEMENT_NODE)&&(b0=o.get(bZ,0),true)))?_5.TreeNode(bY,bX):B.Mk({$:6,$0:bY},bX);};A.FakeRootSingle=function(bU){var bV,bW,bX,bY;bU.removeAttribute("ws-template");bV=bU.getAttribute("ws-replace");bV===null?void 0:(bU.removeAttribute("ws-replace"),bW=bU.parentNode,q.Equals(bW,null)?void 0:(bX=self.document.createElement(bU.tagName),bX.setAttribute("ws-replace",bV),bW.replaceChild(bX,bU)));bY=self.document.createElement("div");bY.appendChild(bU);return bY;};A.FakeRoot=function(bU){var bV;bV=self.document.createElement("div");while(bU.hasChildNodes())bV.appendChild(bU.firstChild);return bV;};A.PrepareTemplateStrict=function(bU,bV,bW,bX){var bY;function bZ(b5,b6){var b7,b8,b9,b_,b$,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv;function ca(cw){}while(true)switch(b5){case 0:if(b6!==null){b7=b6.nextSibling;if(q.Equals(b6.nodeType,N.TEXT_NODE))_6.convertTextNode(b6);else if(q.Equals(b6.nodeType,N.ELEMENT_NODE))b1(b6);b6=b7;}else return null;break;case 1:cb=_7.string(b6.nodeName,{$:1,$0:3},null).toLowerCase();cc=(b8=cb.indexOf("."),b8===-1?[bU,cb]:[_7.string(cb,null,{$:1,$0:b8-1}),_7.string(cb,{$:1,$0:b8+1},null)]);cd=cc[1];ce=cc[0];if(ce!==""&&!A.LoadedTemplates().ContainsKey(ce))return _6.failNotLoaded(cd);else{if(ce===""&&bX!=null)bX.$0(cd);cf=A.LoadedTemplates().get_Item(ce);if(!cf.ContainsKey(cd))return _6.failNotLoaded(cd);else{cg=cf.get_Item(cd);ch=cg.cloneNode(true);ci=new J.New$3();cj=new I.New$5();ck=b6.attributes;for(cl=0,cm=ck.length-1;cl<=cm;cl++){cn=ck.item(cl).name.toLowerCase();cj.set_Item(cn,(co=ck.item(cl).nodeValue,co===""?cn:co.toLowerCase()));!ci.Add(cn)?bN.warn("Hole mapped twice",cn):void 0;}for(cp=0,cq=b6.childNodes.length-1;cp<=cq;cp++){cr=b6.childNodes[cp];q.Equals(cr.nodeType,N.ELEMENT_NODE)?!ci.Add(cr.nodeName.toLowerCase())?bN.warn("Hole filled twice",cd):void 0:void 0;}cs=b6.childNodes.length===1&&q.Equals(b6.firstChild.nodeType,N.TEXT_NODE);if(cs){b_=_6.fillTextHole(ch,b6.firstChild.textContent,cd);((function(cw){return function(cx){if(cx!=null)cw(cx.$0);};}((b$=function(cw){return function(cx){return cw.Add(cx);};}(ci),function(cw){return ca(b$(cw));})))(b_));}_6.removeHolesExcept(ch,ci);if(!cs){for(ct=0,cu=b6.childNodes.length-1;ct<=cu;ct++){cv=b6.childNodes[ct];q.Equals(cv.nodeType,N.ELEMENT_NODE)?cv.hasAttributes()?_6.fillInstanceAttrs(ch,cv):b0(ch,cv):void 0;}}_6.mapHoles(ch,cj);_6.fill(ch,b6.parentNode,b6);b6.parentNode.removeChild(b6);return;}}break;}}function b0(b5,b6){var b7,b9,b_;function b8(b$,ca){var cb;if(b9==="title"&&b6.hasChildNodes()){cb=_8.ParseHTMLIntoFakeRoot(b6.textContent);b6.removeChild(b6.firstChild);while(cb.hasChildNodes())b6.appendChild(cb.firstChild);}else null;b1(b6);return _6.fill(b6,b$,ca);}b9=b6.nodeName.toLowerCase();A.foreachNotPreserved(b5,"[ws-attr-holes]",function(b$){var ca,cb,cc,cd,ce;ca=bj.SplitChars(b$.getAttribute("ws-attr-holes"),[" "],1);for(cb=0,cc=ca.length-1;cb<=cc;cb++){cd=o.get(ca,cb);b$.setAttribute(cd,(ce=new a.RegExp("\\${"+b9+"}","ig"),b$.getAttribute(cd).replace(ce,b6.textContent)));}});b_=b5.querySelector("[ws-hole="+b9+"]");if(q.Equals(b_,null)){b7=b5.querySelector("[ws-replace="+b9+"]");return q.Equals(b7,null)?null:(b8(b7.parentNode,b7),void b7.parentNode.removeChild(b7));}else{while(b_.hasChildNodes())b_.removeChild(b_.lastChild);b_.removeAttribute("ws-hole");return b8(b_,null);}}function b1(b5){if(!b5.hasAttribute("ws-preserve"))if(bj.StartsWith(b5.nodeName.toLowerCase(),"ws-"))b3(b5);else{_6.convertAttrs(b5);b2(b5.firstChild);}}function b2(b5){return bZ(0,b5);}function b3(b5){return bZ(1,b5);}function b4(b5){var b6,b7,b8,b9;while(true){b6=b5.querySelector("[ws-template]");if(q.Equals(b6,null)){b7=b5.querySelector("[ws-children-template]");if(q.Equals(b7,null))return null;else{b8=b7.getAttribute("ws-children-template");b7.removeAttribute("ws-children-template");A.PrepareTemplateStrict(bU,{$:1,$0:b8},b7,null);b5=b5;}}else{b9=b6.getAttribute("ws-template");(A.PrepareSingleTemplate(bU,{$:1,$0:b9},b6))(null);b5=b5;}}}bY=(bV==null?"":bV.$0).toLowerCase();A.LoadedTemplateFile(bU).set_Item(bY,bW);bW.hasChildNodes()?(b4(bW),b2(bW.firstChild)):void 0;};A.InlineTemplate=function(bU,bV){var bW,bX,bY,bZ,b2,b3,b4,b5,b6,b7,b8;function b0(b9,b_){var b$,ca,cb;b$=bf.Insert(b9,b_);b3.push(bf.Updates(b$));b4.push([b9,b$]);ca=bR.GetOptional(b$.OnAfterRender);return ca==null?null:(cb=ca.$0,void b5.push(function(){cb(b9);}));}function b1(b9){var b_,b$;b_=(b$=null,[b6.TryGetValue(b9,{get:function(){return b$;},set:function(ca){b$=ca;}}),b$]);return b_[0]?b_[1].$==0?{$:1,$0:b_[1].$1}:b_[1].$==1?{$:1,$0:B.TextNode(b_[1].$1)}:b_[1].$==2?{$:1,$0:B.TextView(b_[1].$1)}:b_[1].$==8?{$:1,$0:B.TextView(b_[1].$1.get_View())}:b_[1].$==9?{$:1,$0:B.TextView(Q.Map(a.String,b_[1].$1.get_View()))}:b_[1].$==10?{$:1,$0:B.TextView(Q.Map(function(ca){return ca.get_Input();},b_[1].$1.get_View()))}:b_[1].$==11?{$:1,$0:B.TextView(Q.Map(a.String,b_[1].$1.get_View()))}:b_[1].$==12?{$:1,$0:B.TextView(Q.Map(function(ca){return ca.get_Input();},b_[1].$1.get_View()))}:b_[1].$==13?{$:1,$0:B.TextView(Q.Map(a.String,b_[1].$1.get_View()))}:(bN.warn("Content hole filled with attribute data",b9),null):null;}b2=[];b3=[];b4=[];b5=[];b6=new I.New$5();b7=W.Get(bV);try{while(b7.MoveNext()){b8=b7.Current();b6.set_Item(b8.$0,b8);}}finally{if(typeof b7=="object"&&"Dispose"in b7)b7.Dispose();}bW=_8.ChildrenArray(bU);A.foreachNotPreserved(bU,"[ws-hole]",function(b9){var b_,b$,ca;ca=b9.getAttribute("ws-hole");b9.removeAttribute("ws-hole");while(b9.hasChildNodes())b9.removeChild(b9.lastChild);b_=b1(ca);b_!=null&&b_.$==1?(b$=b_.$0,_0.LinkElement(b9,b$.docNode),b2.push(_3.New(bf.Empty(b9),b$.docNode,null,b9,H.Int(),null)),b3.push(b$.updates)):void 0;});A.foreachNotPreserved(bU,"[ws-replace]",function(b9){var b_,b$,ca,cb,cc,cd;b_=b1(b9.getAttribute("ws-replace"));b_!=null&&b_.$==1?(b$=b_.$0,ca=b9.parentNode,cb=self.document.createTextNode(""),ca.replaceChild(cb,b9),cc=_0.InsertBeforeDelim(cb,b$.docNode),cd=o.tryFindIndex(function(ce){return b9===ce;},bW),cd==null?void 0:o.set(bW,cd.$0,b$.docNode),b2.push(_3.New(bf.Empty(ca),b$.docNode,{$:1,$0:[cc,cb]},ca,H.Int(),null)),b3.push(b$.updates)):void 0;});A.foreachNotPreserved(bU,"[ws-attr]",function(b9){var b_,b$,ca;b_=b9.getAttribute("ws-attr");b9.removeAttribute("ws-attr");b$=(ca=null,[b6.TryGetValue(b_,{get:function(){return ca;},set:function(cb){ca=cb;}}),ca]);b$[0]?b$[1].$==3?b0(b9,b$[1].$1):bN.warn("Attribute hole filled with non-attribute data",b_):void 0;});A.foreachNotPreserved(bU,"[ws-on]",function(b9){b0(b9,T.Concat(o.choose(function(b_){var b$,ca,cb;b$=bj.SplitChars(b_,[":"],1);ca=(cb=null,[b6.TryGetValue(o.get(b$,1),{get:function(){return cb;},set:function(cc){cb=cc;}}),cb]);return ca[0]?ca[1].$==4?{$:1,$0:bg.Handler(o.get(b$,0),ca[1].$1)}:ca[1].$==5?{$:1,$0:T.Handler(o.get(b$,0),ca[1].$1)}:(bN.warn("Event hole on"+o.get(b$,0)+" filled with non-event data",o.get(b$,1)),null):null;},bj.SplitChars(b9.getAttribute("ws-on"),[" "],1))));b9.removeAttribute("ws-on");});A.foreachNotPreserved(bU,"[ws-onafterrender]",function(b9){var b_,b$,ca;b_=b9.getAttribute("ws-onafterrender");b$=(ca=null,[b6.TryGetValue(b_,{get:function(){return ca;},set:function(cb){ca=cb;}}),ca]);b$[0]?b$[1].$==6?(b9.removeAttribute("ws-onafterrender"),b0(b9,bg.OnAfterRender(b$[1].$1))):b$[1].$==7?(b9.removeAttribute("ws-onafterrender"),b0(b9,bg.OnAfterRender(b$[1].$1))):bN.warn("onafterrender hole filled with non-onafterrender data",b_):void 0;});A.foreachNotPreserved(bU,"[ws-var]",function(b9){var b_,b$,ca;b_=b9.getAttribute("ws-var");b9.removeAttribute("ws-var");b$=(ca=null,[b6.TryGetValue(b_,{get:function(){return ca;},set:function(cb){ca=cb;}}),ca]);b$[0]?b$[1].$==8?b0(b9,bg.Value(b$[1].$1)):b$[1].$==9?b0(b9,bg.Checked(b$[1].$1)):b$[1].$==10?b0(b9,bg.IntValue(b$[1].$1)):b$[1].$==11?b0(b9,bg.IntValueUnchecked(b$[1].$1)):b$[1].$==12?b0(b9,bg.FloatValue(b$[1].$1)):b$[1].$==13?b0(b9,bg.FloatValueUnchecked(b$[1].$1)):bN.warn("Var hole filled with non-Var data",b_):void 0;});A.foreachNotPreserved(bU,"[ws-attr-holes]",function(b9){var b_,b$,ca,cb;b_=new a.RegExp(A.TextHoleRE(),"g");b$=bj.SplitChars(b9.getAttribute("ws-attr-holes"),[" "],1);b9.removeAttribute("ws-attr-holes");for(ca=0,cb=b$.length-1;ca<=cb;ca++)(function(){var cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co;cl=o.get(b$,ca);cm=b9.getAttribute(cl);cc=null;cd=0;cn=[];while(cc=b_.exec(cm),cc!==null){co=_7.string(cm,{$:1,$0:cd},{$:1,$0:b_.lastIndex-o.get(cc,0).length-1});cd=b_.lastIndex;cn.push([co,o.get(cc,1)]);}cf=_7.string(cm,{$:1,$0:cd},null);b_.lastIndex=0;cg=o.foldBack(function(cp,cq){return(function(cr){var cs,ct;cs=cr[0];ct=cr[1];return function(cu){var cv,cw,cx,cy,cz;cv=cu[0];cw=cu[1];cx=(cy=(cz=null,[b6.TryGetValue(ct,{get:function(){return cz;},set:function(cA){cz=cA;}}),cz]),cy[0]?cy[1].$==1?{$:0,$0:cy[1].$1}:cy[1].$==2?{$:1,$0:cy[1].$1}:cy[1].$==8?{$:1,$0:cy[1].$1.get_View()}:cy[1].$==9?{$:1,$0:Q.Map(a.String,cy[1].$1.get_View())}:cy[1].$==10?{$:1,$0:Q.Map(function(cA){return cA.get_Input();},cy[1].$1.get_View())}:cy[1].$==11?{$:1,$0:Q.Map(a.String,cy[1].$1.get_View())}:cy[1].$==12?{$:1,$0:Q.Map(function(cA){return cA.get_Input();},cy[1].$1.get_View())}:cy[1].$==13?{$:1,$0:Q.Map(a.String,cy[1].$1.get_View())}:(bN.warn("Attribute value hole filled with non-text data",ct),{$:0,$0:""}):{$:0,$0:""});return cx.$==1?[cs,new bi({$:1,$0:cv===""?cx.$0:Q.Map(function(cA){return cA+cv;},cx.$0),$1:cw})]:[cs+cx.$0+cv,cw];};}(cp))(cq);},cn,[cf,bi.Empty]);return b0(b9,cg[1].$==1?cg[1].$1.$==1?cg[1].$1.$1.$==1?cg[1].$1.$1.$1.$==0?(ch=cg[0],bg.Dynamic(cl,Q.Map3(function(cp,cq,cr){return ch+cp+cq+cr;},cg[1].$0,cg[1].$1.$0,cg[1].$1.$1.$0))):(ci=cg[0],bg.Dynamic(cl,Q.Map(function(cp){return ci+bj.concat("",cp);},Q.Sequence(cg[1])))):(cj=cg[0],bg.Dynamic(cl,Q.Map2(function(cp,cq){return cj+cp+cq;},cg[1].$0,cg[1].$1.$0))):cg[0]===""?bg.Dynamic(cl,cg[1].$0):(ck=cg[0],bg.Dynamic(cl,Q.Map(function(cp){return ck+cp;},cg[1].$0))):T.Create(cl,cg[0]));}());});return[bR.DeleteEmptyFields({Els:bW,Dirty:true,Holes:b2,Attrs:b4,Render:(bX=b5.length==0?null:{$:1,$0:function(b9){o.iter(function(b_){b_(b9);},b5);}},bX?bX.$0:void 0),El:(bY=!q.Equals(bW,null)&&bW.length===1&&(o.get(bW,0)instanceof N&&(o.get(bW,0)instanceof a.Element&&(bZ=o.get(bW,0),true)))?{$:1,$0:bZ}:null,bY?bY.$0:void 0)},["Render","El"]),bk.TreeReduce(Q.Const(),Q.Map2Unit,b3)];};A.GlobalHoles=function(){Y.$cctor();return Y.GlobalHoles;};A.foreachNotPreserved=function(bU,bV,bW){_8.IterSelector(bU,bV,function(bX){if(bX.closest("[ws-preserve]")==null)bW(bX);});};A.PrepareSingleTemplate=function(bU,bV,bW){var bX;bX=A.FakeRootSingle(bW);return function(bY){A.PrepareTemplateStrict(bU,bV,bX,bY);};};A.TextHoleRE=function(){Y.$cctor();return Y.TextHoleRE;};B=h.Doc=bR.Class({},g,B);B.RunById=function(bU,bV){var bW;bW=self.document.getElementById(bU);q.Equals(bW,null)?j.FailWith("invalid id: "+bU):B.Run(bW,bV);};B.Run=function(bU,bV){_0.LinkElement(bU,bV.docNode);B.RunInPlace(false,bU,bV);};B.get_Empty=function(){return B.Mk(null,Q.Const());};B.RunInPlace=function(bU,bV,bW){var bX;bX=_0.CreateRunState(bV,bW.docNode);Q.Sink(_.get_UseAnimations()||$.BatchUpdatesEnabled()?ba.StartProcessor(_0.PerformAnimatedUpdate(bU,bX,bW.docNode)):function(){_0.PerformSyncUpdate(bU,bX,bW.docNode);},bW.updates);};B.Mk=function(bU,bV){return new B.New(bU,bV);};B.TextNode=function(bU){return B.Mk({$:5,$0:self.document.createTextNode(bU)},Q.Const());};B.TextView=function(bU){var bV;bV=_0.CreateTextNode();return B.Mk({$:4,$0:bV},Q.Map(function(bW){_0.UpdateTextNode(bV,bW);},bU));};B.New=bR.Ctor(function(bU,bV){g.New.call(this);this.docNode=bU;this.updates=bV;},B);D.NewFromSeq=function(bU){var bV,bW,bX;bV={};bW=W.Get(bU);try{while(bW.MoveNext()){bX=bW.Current();bV[bX[0]]=bX[1];}}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}return bV;};F.Id=bR.Curried3(function(bU,bV,bW){return bW;});H.Int=function(){H.set_counter(H.counter()+1);return H.counter();};H.set_counter=function(bU){_2.$cctor();_2.counter=bU;};H.counter=function(){_2.$cctor();return _2.counter;};I=w.Dictionary=bR.Class({set_Item:function(bU,bV){this.set(bU,bV);},set:function(bU,bV){var bW,bX,bY,bZ;bW=this;bX=this.hash(bU);bY=this.data[bX];bY==null?(this.count=this.count+1,this.data[bX]=new a.Array({K:bU,V:bV})):(bZ=o.tryFindIndex(function(b0){return bW.equals.apply(null,[(j.KeyValue(b0))[0],bU]);},bY),bZ==null?(this.count=this.count+1,bY.push({K:bU,V:bV})):bY[bZ.$0]={K:bU,V:bV});},TryGetValue:function(bU,bV){var bW,bX,bY;bW=this;bX=this.data[this.hash(bU)];return bX==null?false:(bY=o.tryPick(function(bZ){var b0;b0=j.KeyValue(bZ);return bW.equals.apply(null,[b0[0],bU])?{$:1,$0:b0[1]}:null;},bX),bY!=null&&bY.$==1&&(bV.set(bY.$0),true));},ContainsKey:function(bU){var bV,bW;bV=this;bW=this.data[this.hash(bU)];return bW==null?false:o.exists(function(bX){return bV.equals.apply(null,[(j.KeyValue(bX))[0],bU]);},bW);},Remove:function(bU){return this.remove(bU);},get_Keys:function(){return new _9.New(this);},get_Values:function(){return new bm.New(this);},remove:function(bU){var bV,bW,bX,bY;bV=this;bW=this.hash(bU);bX=this.data[bW];return bX==null?false:(bY=o.filter(function(bZ){return!bV.equals.apply(null,[(j.KeyValue(bZ))[0],bU]);},bX),o.length(bY)<bX.length&&(this.count=this.count-1,this.data[bW]=bY,true));},get_Item:function(bU){return this.get(bU);},get:function(bU){var bV,bW;bV=this;bW=this.data[this.hash(bU)];return bW==null?V.notPresent():o.pick(function(bX){var bY;bY=j.KeyValue(bX);return bV.equals.apply(null,[bY[0],bU])?{$:1,$0:bY[1]}:null;},bW);},GetEnumerator:function(){return W.Get0(this);},GetEnumerator0:function(){return W.Get0(o.concat(O.GetFieldValues(this.data)));}},g,I);I.New$5=bR.Ctor(function(){I.New$6.call(this,[],q.Equals,q.Hash);},I);I.New$6=bR.Ctor(function(bU,bV,bW){var bX,bY;g.New.call(this);this.equals=bV;this.hash=bW;this.count=0;this.data=[];bX=W.Get(bU);try{while(bX.MoveNext()){bY=bX.Current();this.set(bY.K,bY.V);}}finally{if(typeof bX=="object"&&"Dispose"in bX)bX.Dispose();}},I);J=w.HashSet=bR.Class({Add:function(bU){return this.add(bU);},Contains:function(bU){var bV;bV=this.data[this.hash(bU)];return bV==null?false:this.arrContains(bU,bV);},add:function(bU){var bV,bW;bV=this.hash(bU);bW=this.data[bV];return bW==null?(this.data[bV]=[bU],this.count=this.count+1,true):this.arrContains(bU,bW)?false:(bW.push(bU),this.count=this.count+1,true);},arrContains:function(bU,bV){var bW,bX,bY,bZ;bW=true;bX=0;bZ=bV.length;while(bW&&bX<bZ)if(this.equals.apply(null,[bV[bX],bU]))bW=false;else bX=bX+1;return!bW;},ExceptWith:function(bU){var bV;bV=W.Get(bU);try{while(bV.MoveNext())this.Remove(bV.Current());}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bU){var bV,bW,bX,bY;bV=0;bW=bv.concat(this.data);for(bX=0,bY=bW.length-1;bX<=bY;bX++)o.set(bU,bX,bW[bX]);},IntersectWith:function(bU){var bV,bW,bX,bY,bZ;bV=new J.New$4(bU,this.equals,this.hash);bW=bv.concat(this.data);for(bX=0,bY=bW.length-1;bX<=bY;bX++){bZ=bW[bX];!bV.Contains(bZ)?this.Remove(bZ):void 0;}},Remove:function(bU){var bV;bV=this.data[this.hash(bU)];return bV==null?false:this.arrRemove(bU,bV)&&(this.count=this.count-1,true);},arrRemove:function(bU,bV){var bW,bX,bY,bZ;bW=true;bX=0;bZ=bV.length;while(bW&&bX<bZ)if(this.equals.apply(null,[bV[bX],bU])){bV.splice.apply(bV,[bX,1]);bW=false;}else bX=bX+1;return!bW;},GetEnumerator:function(){return W.Get(bv.concat(this.data));},GetEnumerator0:function(){return W.Get(bv.concat(this.data));}},g,J);J.New$3=bR.Ctor(function(){J.New$4.call(this,[],q.Equals,q.Hash);},J);J.New$4=bR.Ctor(function(bU,bV,bW){var bX;g.New.call(this);this.equals=bV;this.hash=bW;this.data=[];this.count=0;bX=W.Get(bU);try{while(bX.MoveNext())this.add(bX.Current());}finally{if(typeof bX=="object"&&"Dispose"in bX)bX.Dispose();}},J);J.New$2=bR.Ctor(function(bU){J.New$4.call(this,bU,q.Equals,q.Hash);},J);K.append=function(bU,bV){return{GetEnumerator:function(){var bW,bX;bW=W.Get(bU);bX=[true];return new X.New(bW,null,function(bY){var bZ;return bY.s.MoveNext()?(bY.c=bY.s.Current(),true):(bZ=bY.s,!q.Equals(bZ,null)?bZ.Dispose():void 0,bY.s=null,bX[0]&&(bX[0]=false,bY.s=W.Get(bV),bY.s.MoveNext()?(bY.c=bY.s.Current(),true):(bY.s.Dispose(),bY.s=null,false)));},function(bY){var bZ;bZ=bY.s;!q.Equals(bZ,null)?bZ.Dispose():void 0;});}};};K.head=function(bU){var bV;bV=W.Get(bU);try{return bV.MoveNext()?bV.Current():K.insufficient();}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}};K.fold=function(bU,bV,bW){var bX,bY;bX=bV;bY=W.Get(bW);try{while(bY.MoveNext())bX=bU(bX,bY.Current());return bX;}finally{if(typeof bY=="object"&&"Dispose"in bY)bY.Dispose();}};K.iter=function(bU,bV){var bW;bW=W.Get(bV);try{while(bW.MoveNext())bU(bW.Current());}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}};K.map=function(bU,bV){return{GetEnumerator:function(){var bW;bW=W.Get(bV);return new X.New(null,null,function(bX){return bW.MoveNext()&&(bX.c=bU(bW.Current()),true);},function(){bW.Dispose();});}};};K.max=function(bU){var bV,bW,bX;bV=W.Get(bU);try{if(!bV.MoveNext())K.seqEmpty();bW=bV.Current();while(bV.MoveNext()){bX=bV.Current();q.Compare(bX,bW)===1?bW=bX:void 0;}return bW;}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}};K.seqEmpty=function(){return j.FailWith("The input sequence was empty.");};K.forall=function(bU,bV){return!K.exists(function(bW){return!bU(bW);},bV);};K.exists=function(bU,bV){var bW,bX;bW=W.Get(bV);try{bX=false;while(!bX&&bW.MoveNext())bX=bU(bW.Current());return bX;}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}};o.choose=function(bU,bV){var bW,bX,bY,bZ;bW=[];for(bX=0,bY=bV.length-1;bX<=bY;bX++){bZ=bU(bV[bX]);bZ==null?void 0:bW.push(bZ.$0);}return bW;};o.tryFindIndex=function(bU,bV){var bW,bX;bW=null;bX=0;while(bX<bV.length&&bW==null){bU(bV[bX])?bW={$:1,$0:bX}:void 0;bX=bX+1;}return bW;};o.tryPick=function(bU,bV){var bW,bX,bY;bW=null;bX=0;while(bX<bV.length&&bW==null){bY=bU(bV[bX]);bY!=null&&bY.$==1?bW=bY:void 0;bX=bX+1;}return bW;};o.exists=function(bU,bV){var bW,bX,bY,bZ;bW=false;bX=0;bZ=o.length(bV);while(!bW&&bX<bZ)if(bU(bV[bX]))bW=true;else bX=bX+1;return bW;};o.concat=function(bU){return a.Array.prototype.concat.apply([],o.ofSeq(bU));};o.foldBack=function(bU,bV,bW){var bX,bY,bZ,b0,b1;bX=bW;bZ=bV.length;for(b0=1,b1=bZ;b0<=b1;b0++)bX=bU(bV[bZ-b0],bX);return bX;};o.iter=function(bU,bV){var bW,bX;for(bW=0,bX=bV.length-1;bW<=bX;bW++)bU(bV[bW]);};o.map=function(bU,bV){var bW,bX,bY;bW=new a.Array(bV.length);for(bX=0,bY=bV.length-1;bX<=bY;bX++)bW[bX]=bU(bV[bX]);return bW;};o.filter=function(bU,bV){var bW,bX,bY;bW=[];for(bX=0,bY=bV.length-1;bX<=bY;bX++)if(bU(bV[bX]))bW.push(bV[bX]);return bW;};o.ofSeq=function(bU){var bV,bW;if(bU instanceof a.Array)return bU.slice();else if(bU instanceof bi)return o.ofList(bU);else{bV=[];bW=W.Get(bU);try{while(bW.MoveNext())bV.push(bW.Current());return bV;}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}}};o.pick=function(bU,bV){var bW;bW=o.tryPick(bU,bV);return bW==null?j.FailWith("KeyNotFoundException"):bW.$0;};o.ofList=function(bU){var bV,bW;bW=[];bV=bU;while(!(bV.$==0)){bW.push(bh.head(bV));bV=bh.tail(bV);}return bW;};o.forall=function(bU,bV){var bW,bX,bY,bZ;bW=true;bX=0;bZ=o.length(bV);while(bW&&bX<bZ)if(bU(bV[bX]))bX=bX+1;else bW=false;return bW;};o.create=function(bU,bV){var bW,bX,bY;bW=new a.Array(bU);for(bX=0,bY=bU-1;bX<=bY;bX++)bW[bX]=bV;return bW;};o.init=function(bU,bV){var bW,bX,bY;bU<0?j.FailWith("Negative size given."):null;bW=new a.Array(bU);for(bX=0,bY=bU-1;bX<=bY;bX++)bW[bX]=bV(bX);return bW;};L.$cctor=function(){L.$cctor=a.ignore;L.initialized=new I.New$5();};L=m.TemplateInitializer=bR.Class({},g,L);L.GetOrAddHoleFor=function(bU,bV,bW){var bX,bY,bZ,b0;L.$cctor();bX=L.GetHolesFor(bU);bY=(bZ=null,[bX.TryGetValue(bV,{get:function(){return bZ;},set:function(b1){bZ=b1;}}),bZ]);return bY[0]?bY[1]:(b0=bW(),(bX.set_Item(bV,b0),b0));};L.GetHolesFor=function(bU){var bV,bW,bX;L.$cctor();bV=(bW=null,[L.initialized.TryGetValue(bU,{get:function(){return bW;},set:function(bY){bW=bY;}}),bW]);return bV[0]?bV[1]:(bX=new I.New$5(),(L.initialized.set_Item(bU,bX),bX));};O.GetFieldValues=function(bU){var bV,bW;bV=[];for(var bX in bU)bV.push(bU[bX]);return bV;};P.Delay=function(bU){return function(bV){try{(bU(null))(bV);}catch(bW){bV.k({$:1,$0:bW});}};};P.Bind=function(bU,bV){return P.checkCancel(function(bW){bU(_1.New(function(bX){var bY;if(bX.$==0){bY=bX.$0;P.scheduler().Fork(function(){try{(bV(bY))(bW);}catch(bZ){bW.k({$:1,$0:bZ});}});}else P.scheduler().Fork(function(){bW.k(bX);});},bW.ct));});};P.Return=function(bU){return function(bV){bV.k({$:0,$0:bU});};};P.checkCancel=function(bU){return function(bV){if(bV.ct.c)P.cancel(bV);else bU(bV);};};P.FromContinuations=function(bU){return function(bV){var bW;function bX(bY){if(bW[0])j.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bW[0]=true;P.scheduler().Fork(bY);}}bW=[false];bU(function(bY){bX(function(){bV.k({$:0,$0:bY});});},function(bY){bX(function(){bV.k({$:1,$0:bY});});},function(bY){bX(function(){bV.k({$:2,$0:bY});});});};};P.cancel=function(bU){bU.k({$:2,$0:new bt.New(bU.ct)});};P.scheduler=function(){bu.$cctor();return bu.scheduler;};P.Zero=function(){bu.$cctor();return bu.Zero;};P.Start=function(bU,bV){var bW,bX;bW=(bX=(P.defCTS())[0],bV==null?bX:bV.$0);P.scheduler().Fork(function(){if(!bW.c)bU(_1.New(function(bY){if(bY.$==1)P.UncaughtAsyncError(bY.$0);},bW));});};P.defCTS=function(){bu.$cctor();return bu.defCTS;};P.UncaughtAsyncError=function(bU){bN.log("WebSharper: Uncaught asynchronous exception",bU);};t.Obsolete=function(bU){var bV,bW,bX,bY,bZ;bW=bU.s;if(bW==null||(bW!=null&&bW.$==2?(bV=bW.$1,false):bW!=null&&bW.$==3?(bV=bW.$1,false):true))void 0;else{bU.s=null;for(bX=0,bY=o.length(bV)-1;bX<=bY;bX++){bZ=o.get(bV,bX);typeof bZ=="object"?function(b0){t.Obsolete(b0);}(bZ):bZ();}}};t.New=function(bU){return{s:bU};};Q=h.View=bR.Class({},null,Q);R.TryParseInt32=function(bU,bV){return R.TryParse(bU,-2147483648,2147483647,bV);};T=h.AttrProxy=bR.Class({},null,T);T.Handler=function(bU,bV){return T.HandlerImpl(bU,bV);};T.Concat=function(bU){var bV;bV=bk.ofSeqNonCopying(bU);return bk.TreeReduce(bf.EmptyAttr(),T.Append,bV);};T.Create=function(bU,bV){return bf.Static(function(bW){bW.setAttribute(bU,bV);});};T.HandlerImpl=function(bU,bV){return bf.Static(function(bW){bW.addEventListener(bU,function(bX){return(bV(bW))(bX);},false);});};T.Append=function(bU,bV){return bf.AppendTree(bU,bV);};U=h.CheckedInput=bR.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,U);V.notPresent=function(){return j.FailWith("The given key was not present in the dictionary.");};W.Get=function(bU){return bU instanceof a.Array?W.ArrayEnumerator(bU):q.Equals(typeof bU,"string")?W.StringEnumerator(bU):bU.GetEnumerator();};W.ArrayEnumerator=function(bU){return new X.New(0,null,function(bV){var bW;bW=bV.s;return bW<o.length(bU)&&(bV.c=o.get(bU,bW),bV.s=bW+1,true);},void 0);};W.StringEnumerator=function(bU){return new X.New(0,null,function(bV){var bW;bW=bV.s;return bW<bU.length&&(bV.c=bU[bW],bV.s=bW+1,true);},void 0);};W.Get0=function(bU){return bU instanceof a.Array?W.ArrayEnumerator(bU):q.Equals(typeof bU,"string")?W.StringEnumerator(bU):"GetEnumerator0"in bU?bU.GetEnumerator0():bU.GetEnumerator();};X=W.T=bR.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},g,X);X.New=bR.Ctor(function(bU,bV,bW,bX){g.New.call(this);this.s=bU;this.c=bV;this.n=bW;this.d=bX;},X);Y.$cctor=function(){Y.$cctor=a.ignore;Y.LoadedTemplates=new I.New$5();Y.LocalTemplatesLoaded=false;Y.GlobalHoles=new I.New$5();Y.TextHoleRE="\\${([^}]+)}";Y.RenderedFullDocTemplate=null;};_0.LinkElement=function(bU,bV){_0.InsertDoc(bU,bV,null);};_0.InsertDoc=function(bU,bV,bW){var bX,bY,bZ;while(true)if(bV!=null&&bV.$==1)return _0.InsertNode(bU,bV.$0.El,bW);else if(bV!=null&&bV.$==2){bX=bV.$0;bX.Dirty=false;bV=bX.Current;}else if(bV==null)return bW;else if(bV!=null&&bV.$==4)return _0.InsertNode(bU,bV.$0.Text,bW);else if(bV!=null&&bV.$==5)return _0.InsertNode(bU,bV.$0,bW);else if(bV!=null&&bV.$==6)return o.foldBack(function(b0,b1){return(((bR.Curried3(function(b2,b3,b4){return b3==null||b3.constructor===S?_0.InsertDoc(b2,b3,b4):_0.InsertNode(b2,b3,b4);}))(bU))(b0))(b1);},bV.$0.Els,bW);else{bY=bV.$1;bZ=bV.$0;bV=bZ;bW=_0.InsertDoc(bU,bY,bW);}};_0.CreateRunState=function(bU,bV){return bo.New(bp.get_Empty(),_0.CreateElemNode(bU,bf.EmptyAttr(),bV));};_0.PerformAnimatedUpdate=function(bU,bV,bW){var bX;return _.get_UseAnimations()?(bX=null,P.Delay(function(){var bY,bZ,b0;bY=bp.FindAll(bW);bZ=_0.ComputeChangeAnim(bV,bY);b0=_0.ComputeEnterAnim(bV,bY);return P.Bind(_.Play(_.Append(bZ,_0.ComputeExitAnim(bV,bY))),function(){return P.Bind(_0.SyncElemNodesNextFrame(bU,bV),function(){return P.Bind(_.Play(b0),function(){bV.PreviousNodes=bY;return P.Return(null);});});});})):_0.SyncElemNodesNextFrame(bU,bV);};_0.PerformSyncUpdate=function(bU,bV,bW){var bX;bX=bp.FindAll(bW);_0.SyncElemNode(bU,bV.Top);bV.PreviousNodes=bX;};_0.InsertBeforeDelim=function(bU,bV){var bW,bX;bW=bU.parentNode;bX=self.document.createTextNode("");bW.insertBefore(bX,bU);_0.LinkPrevElement(bU,bV);return bX;};_0.InsertNode=function(bU,bV,bW){_8.InsertAt(bU,bW,bV);return bV;};_0.CreateElemNode=function(bU,bV,bW){var bX;_0.LinkElement(bU,bW);bX=bf.Insert(bU,bV);return _3.New(bX,bW,null,bU,H.Int(),bR.GetOptional(bX.OnAfterRender));};_0.SyncElemNodesNextFrame=function(bU,bV){function bW(bX){a.requestAnimationFrame(function(){_0.SyncElemNode(bU,bV.Top);bX();});}return $.BatchUpdatesEnabled()?P.FromContinuations(function(bX,bY,bZ){return bW.apply(null,[bX,bY,bZ]);}):(_0.SyncElemNode(bU,bV.Top),P.Return(null));};_0.ComputeExitAnim=function(bU,bV){return _.Concat(o.map(function(bW){return bf.GetExitAnim(bW.Attr);},bp.ToArray(bp.Except(bV,bp.Filter(function(bW){return bf.HasExitAnim(bW.Attr);},bU.PreviousNodes)))));};_0.ComputeEnterAnim=function(bU,bV){return _.Concat(o.map(function(bW){return bf.GetEnterAnim(bW.Attr);},bp.ToArray(bp.Except(bU.PreviousNodes,bp.Filter(function(bW){return bf.HasEnterAnim(bW.Attr);},bV)))));};_0.ComputeChangeAnim=function(bU,bV){var bW;function bX(bY){return bf.HasChangeAnim(bY.Attr);}bW=function(bY){return bp.Filter(bX,bY);};return _.Concat(o.map(function(bY){return bf.GetChangeAnim(bY.Attr);},bp.ToArray(bp.Intersect(bW(bU.PreviousNodes),bW(bV)))));};_0.SyncElemNode=function(bU,bV){!bU?_0.SyncElement(bV):void 0;_0.Sync(bV.Children);_0.AfterRender(bV);};_0.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};_0.UpdateTextNode=function(bU,bV){bU.Value=bV;bU.Dirty=true;};_0.LinkPrevElement=function(bU,bV){_0.InsertDoc(bU.parentNode,bV,bU);};_0.SyncElement=function(bU){function bV(bW){function bX(bY){var bZ,b0,b1,b2;while(true){if(bY!=null&&bY.$==0){b0=bY.$1;b1=bY.$0;if(bX(b1))return true;else bY=b0;}else if(bY!=null&&bY.$==2){b2=bY.$0;if(b2.Dirty)return true;else bY=b2.Current;}else return bY!=null&&bY.$==6&&(bZ=bY.$0,bZ.Dirty||o.exists(bV,bZ.Holes));}}return bX(bW.Children);}bf.Sync(bU.El,bU.Attr);bV(bU)?_0.DoSyncElement(bU):void 0;};_0.Sync=function(bU){var bV,bW,bX,bY,bZ;while(true){if(bU!=null&&bU.$==1)return _0.SyncElemNode(false,bU.$0);else if(bU!=null&&bU.$==2){bX=bU.$0;bU=bX.Current;}else if(bU==null)return null;else if(bU!=null&&bU.$==5)return null;else if(bU!=null&&bU.$==4){bV=bU.$0;return bV.Dirty?(bV.Text.nodeValue=bV.Value,bV.Dirty=false):null;}else if(bU!=null&&bU.$==6){bW=bU.$0;o.iter(function(b0){return function(b1){_0.SyncElemNode(b0,b1);};}(false),bW.Holes);o.iter(function(b0){bf.Sync(b0[0],b0[1]);},bW.Attrs);return _0.AfterRender(bW);}else{bY=bU.$1;bZ=bU.$0;_0.Sync(bZ);bU=bY;}}};_0.AfterRender=function(bU){var bV;bV=bR.GetOptional(bU.Render);bV!=null&&bV.$==1?(bV.$0(bU.El),bR.SetOptional(bU,"Render",null)):void 0;};_0.DoSyncElement=function(bU){var bV,bW,bX;function bY(bZ,b0){var b1,b2,b3,b4;while(true){if(bZ!=null&&bZ.$==1)return bZ.$0.El;else if(bZ!=null&&bZ.$==2){b2=bZ.$0;if(b2.Dirty){b2.Dirty=false;return _0.InsertDoc(bV,b2.Current,b0);}else bZ=b2.Current;}else if(bZ==null)return b0;else if(bZ!=null&&bZ.$==4)return bZ.$0.Text;else if(bZ!=null&&bZ.$==5)return bZ.$0;else if(bZ!=null&&bZ.$==6){b1=bZ.$0;b1.Dirty?b1.Dirty=false:void 0;return o.foldBack(function(b5,b6){return b5==null||b5.constructor===S?bY(b5,b6):b5;},b1.Els,b0);}else{b3=bZ.$1;b4=bZ.$0;bZ=b4;b0=bY(b3,b0);}}}bV=bU.El;bG.Iter((bW=bU.El,function(bZ){_8.RemoveNode(bW,bZ);}),bG.Except(bG.DocChildren(bU),bG.Children(bU.El,bR.GetOptional(bU.Delimiters))));bY(bU.Children,(bX=bR.GetOptional(bU.Delimiters),bX!=null&&bX.$==1?bX.$0[1]:null));};_1.New=function(bU,bV){return{k:bU,ct:bV};};_2.$cctor=function(){_2.$cctor=a.ignore;_2.counter=0;};_3=h.DocElemNode=bR.Class({Equals:function(bU){return this.ElKey===bU.ElKey;},GetHashCode:function(){return this.ElKey;}},null,_3);_3.New=function(bU,bV,bW,bX,bY,bZ){var b0;return new _3((b0={Attr:bU,Children:bV,El:bX,ElKey:bY},(bR.SetOptional(b0,"Delimiters",bW),bR.SetOptional(b0,"Render",bZ),b0)));};_5=h.Elt=bR.Class({},B,_5);_5.TreeNode=function(bU,bV){var bW,bX;function bY(bZ){return bZ[1];}bW=bl.Create(bV);return new _5.New$1({$:6,$0:bU},Q.Map2Unit((bX=o.map(function(bZ){return bf.Updates(bY(bZ));},bU.Attrs),bk.TreeReduce(Q.Const(),Q.Map2Unit,bX)),bW.v),o.get(bU.Els,0),bW);};_5.New$1=bR.Ctor(function(bU,bV,bW,bX){B.New.call(this,bU,bV);this.docNode$1=bU;this.updates$1=bV;this.elt=bW;this.rvUpdates=bX;},_5);Q.Const=function(bU){var bV;bV=t.New({$:0,$0:bU});return function(){return bV;};};Q.Sink=function(bU,bV){function bW(){t.WhenRun(bV(),bU,function(){P.scheduler().Fork(bW);});}P.scheduler().Fork(bW);};Q.Map=function(bU,bV){return Q.CreateLazy(function(){return t.Map(bU,bV());});};Q.Map3=function(bU,bV,bW,bX){return Q.CreateLazy(function(){return t.Map3(bU,bV(),bW(),bX());});};Q.Sequence=function(bU){return Q.CreateLazy(function(){return t.Sequence(K.map(function(bV){return bV();},bU));});};Q.Map2=function(bU,bV,bW){return Q.CreateLazy(function(){return t.Map2(bU,bV(),bW());});};Q.Map2Unit=function(bU,bV){return Q.CreateLazy(function(){return t.Map2Unit(bU(),bV());});};Q.CreateLazy=function(bU){var bV;bV={c:null,o:bU};return function(){var bW,bX;bW=bV.c;return bW===null?(bW=bV.o(),bV.c=bW,(bX=bW.s,bX!=null&&bX.$==0)?bV.o=null:t.WhenObsoleteRun(bW,function(){bV.c=null;}),bW):bW;};};_6.convertTextNode=function(bU){var bV,bW,bX,bY,bZ,b0;bV=null;bW=0;bY=bU.textContent;bZ=new a.RegExp(A.TextHoleRE(),"g");while(bV=bZ.exec(bY),bV!==null){bU.parentNode.insertBefore(self.document.createTextNode(_7.string(bY,{$:1,$0:bW},{$:1,$0:bZ.lastIndex-o.get(bV,0).length-1})),bU);bW=bZ.lastIndex;b0=self.document.createElement("span");b0.setAttribute("ws-replace",o.get(bV,1).toLowerCase());bU.parentNode.insertBefore(b0,bU);}bZ.lastIndex=0;bU.textContent=_7.string(bY,{$:1,$0:bW},null);};_6.failNotLoaded=function(bU){bN.warn("Instantiating non-loaded template",bU);};_6.fillTextHole=function(bU,bV,bW){var bX;bX=bU.querySelector("[ws-replace]");return q.Equals(bX,null)?(bN.warn("Filling non-existent text hole",bW),null):(bX.parentNode.replaceChild(self.document.createTextNode(bV),bX),{$:1,$0:bX.getAttribute("ws-replace")});};_6.removeHolesExcept=function(bU,bV){function bW(bX){A.foreachNotPreserved(bU,"["+bX+"]",function(bY){if(!bV.Contains(bY.getAttribute(bX)))bY.removeAttribute(bX);});}bW("ws-attr");bW("ws-onafterrender");bW("ws-var");A.foreachNotPreserved(bU,"[ws-hole]",function(bX){if(!bV.Contains(bX.getAttribute("ws-hole"))){bX.removeAttribute("ws-hole");while(bX.hasChildNodes())bX.removeChild(bX.lastChild);}});A.foreachNotPreserved(bU,"[ws-replace]",function(bX){if(!bV.Contains(bX.getAttribute("ws-replace")))bX.parentNode.removeChild(bX);});A.foreachNotPreserved(bU,"[ws-on]",function(bX){bX.setAttribute("ws-on",bj.concat(" ",o.filter(function(bY){return bV.Contains(o.get(bj.SplitChars(bY,[":"],1),1));},bj.SplitChars(bX.getAttribute("ws-on"),[" "],1))));});A.foreachNotPreserved(bU,"[ws-attr-holes]",function(bX){var bY,bZ,b0,b1,b2;bY=bj.SplitChars(bX.getAttribute("ws-attr-holes"),[" "],1);for(bZ=0,b0=bY.length-1;bZ<=b0;bZ++){b1=o.get(bY,bZ);bX.setAttribute(b1,(b2=new a.RegExp(A.TextHoleRE(),"g"),bX.getAttribute(b1).replace(b2,function(b3,b4){return bV.Contains(b4)?b3:"";})));}});};_6.fillInstanceAttrs=function(bU,bV){var bW,bX,bY,bZ,b0;_6.convertAttrs(bV);bW=bV.nodeName.toLowerCase();bX=bU.querySelector("[ws-attr="+bW+"]");if(q.Equals(bX,null))bN.warn("Filling non-existent attr hole",bW);else{bX.removeAttribute("ws-attr");for(bY=0,bZ=bV.attributes.length-1;bY<=bZ;bY++){b0=bV.attributes.item(bY);b0.name==="class"&&bX.hasAttribute("class")?bX.setAttribute("class",bX.getAttribute("class")+" "+b0.nodeValue):bX.setAttribute(b0.name,b0.nodeValue);}}};_6.mapHoles=function(bU,bV){function bW(bX){A.foreachNotPreserved(bU,"["+bX+"]",function(bY){var bZ,b0;bZ=(b0=null,[bV.TryGetValue(bY.getAttribute(bX).toLowerCase(),{get:function(){return b0;},set:function(b1){b0=b1;}}),b0]);bZ[0]?bY.setAttribute(bX,bZ[1]):void 0;});}bW("ws-hole");bW("ws-replace");bW("ws-attr");bW("ws-onafterrender");bW("ws-var");A.foreachNotPreserved(bU,"[ws-on]",function(bX){bX.setAttribute("ws-on",bj.concat(" ",o.map(function(bY){var bZ,b0,b1;bZ=bj.SplitChars(bY,[":"],1);b0=(b1=null,[bV.TryGetValue(o.get(bZ,1),{get:function(){return b1;},set:function(b2){b1=b2;}}),b1]);return b0[0]?o.get(bZ,0)+":"+b0[1]:bY;},bj.SplitChars(bX.getAttribute("ws-on"),[" "],1))));});A.foreachNotPreserved(bU,"[ws-attr-holes]",function(bX){var bY,bZ,b0;bY=bj.SplitChars(bX.getAttribute("ws-attr-holes"),[" "],1);for(bZ=0,b0=bY.length-1;bZ<=b0;bZ++)(function(){var b1;function b2(b3,b4){var b5;b5=j.KeyValue(b4);return b3.replace(new a.RegExp("\\${"+b5[0]+"}","ig"),"${"+b5[1]+"}");}b1=o.get(bY,bZ);return bX.setAttribute(b1,(((bR.Curried3(K.fold))(b2))(bX.getAttribute(b1)))(bV));}());});};_6.fill=function(bU,bV,bW){while(true)if(bU.hasChildNodes())bW=bV.insertBefore(bU.lastChild,bW);else return null;};_6.convertAttrs=function(bU){var bW,bX,bY,bZ,b0,b1,b2,b3;function bV(b4){var b5;b5=bU.getAttribute(b4);b5===null?void 0:bU.setAttribute(b4,b5.toLowerCase());}bW=bU.attributes;bX=[];bY=[];bZ=[];for(b0=0,b1=bW.length-1;b0<=b1;b0++){b2=bW.item(b0);bj.StartsWith(b2.nodeName,"ws-on")&&b2.nodeName!=="ws-onafterrender"&&b2.nodeName!=="ws-on"?(bX.push(b2.nodeName),bY.push(_7.string(b2.nodeName,{$:1,$0:"ws-on".length},null)+":"+b2.nodeValue.toLowerCase())):!bj.StartsWith(b2.nodeName,"ws-")&&(new a.RegExp(A.TextHoleRE())).test(b2.nodeValue)?(b2.nodeValue=(b3=new a.RegExp(A.TextHoleRE(),"g"),b2.nodeValue.replace(b3,function(b4,b5){return"${"+b5.toLowerCase()+"}";})),bZ.push(b2.nodeName)):void 0;}!(bY.length==0)?bU.setAttribute("ws-on",bj.concat(" ",bY)):void 0;!(bZ.length==0)?bU.setAttribute("ws-attr-holes",bj.concat(" ",bZ)):void 0;bV("ws-hole");bV("ws-replace");bV("ws-attr");bV("ws-onafterrender");bV("ws-var");o.iter(function(b4){bU.removeAttribute(b4);},bX);};_7.string=function(bU,bV,bW){return bV==null?bW!=null&&bW.$==1?bU.slice(0,bW.$0+1):"":bW==null?bU.slice(bV.$0):bU.slice(bV.$0,bW.$0+1);};_8.ParseHTMLIntoFakeRoot=function(bU){var bV,bW,bX,bY,bZ;function b0(b1,b2){var b3;while(true)if(b2===0)return b1;else{b3=b2;b1=b1.lastChild;b2=b3-1;}}bV=self.document.createElement("div");return!_8.rhtml().test(bU)?(bV.appendChild(self.document.createTextNode(bU)),bV):(bW=(bX=_8.rtagName().exec(bU),q.Equals(bX,null)?"":o.get(bX,1).toLowerCase()),(bY=(bZ=(_8.wrapMap())[bW],bZ?bZ:_8.defaultWrap()),(bV.innerHTML=bY[1]+bU.replace(_8.rxhtmlTag(),"<$1></$2>")+bY[2],b0(bV,bY[0]))));};_8.ChildrenArray=function(bU){var bV,bW,bX;bV=[];for(bW=0,bX=bU.childNodes.length-1;bW<=bX;bW++)bV.push(bU.childNodes[bW]);return bV;};_8.rhtml=function(){bx.$cctor();return bx.rhtml;};_8.wrapMap=function(){bx.$cctor();return bx.wrapMap;};_8.defaultWrap=function(){bx.$cctor();return bx.defaultWrap;};_8.rxhtmlTag=function(){bx.$cctor();return bx.rxhtmlTag;};_8.rtagName=function(){bx.$cctor();return bx.rtagName;};_8.IterSelector=function(bU,bV,bW){var bX,bY,bZ;bX=bU.querySelectorAll(bV);for(bY=0,bZ=bX.length-1;bY<=bZ;bY++)bW(bX[bY]);};_8.InsertAt=function(bU,bV,bW){var bX;if(!(bW.parentNode===bU&&bV===(bX=bW.nextSibling,q.Equals(bX,null)?null:bX)))bU.insertBefore(bW,bV);};_8.RemoveNode=function(bU,bV){if(bV.parentNode===bU)bU.removeChild(bV);};K.insufficient=function(){return j.FailWith("The input sequence has an insufficient number of elements.");};_9=w.KeyCollection=bR.Class({GetEnumerator$1:function(){return W.Get(K.map(function(bU){return bU.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},g,_9);_9.New=bR.Ctor(function(bU){g.New.call(this);this.d=bU;},_9);_.get_UseAnimations=function(){return bq.UseAnimations();};_.Play=function(bU){var bV;bV=null;return P.Delay(function(){return P.Bind(_.Run(a.ignore,bq.Actions(bU)),function(){bq.Finalize(bU);return P.Return(null);});});};_.Append=function(bU,bV){return{$:0,$0:bz.Append(bU.$0,bV.$0)};};_.Run=function(bU,bV){var bW;function bX(bY){function bZ(b0){return function(b1){var b2;b2=b1-b0;bV.Compute(b2);bU();return b2<=bW?void a.requestAnimationFrame(function(b3){(bZ(b0))(b3);}):bY();};}a.requestAnimationFrame(function(b0){(bZ(b0))(b0);});}bW=bV.Duration;return bW===0?P.Zero():P.FromContinuations(function(bY,bZ,b0){return bX.apply(null,[bY,bZ,b0]);});};_.Concat=function(bU){return{$:0,$0:bz.Concat(K.map(bq.List,bU))};};_.get_Empty=function(){return{$:0,$0:bz.Empty()};};$.BatchUpdatesEnabled=function(){br.$cctor();return br.BatchUpdatesEnabled;};ba.StartProcessor=function(bU){var bV;function bW(){var bX;bX=null;return P.Delay(function(){return P.Bind(bU,function(){var bY;bY=bV[0];return bY===1?(bV[0]=0,P.Zero()):bY===2?(bV[0]=1,bW()):P.Zero();});});}bV=[0];return function(){var bX;bX=bV[0];bX===0?(bV[0]=1,P.Start(bW(),null)):bX===1?bV[0]=2:void 0;};};bb.New=function(bU,bV){return{c:bU,r:bV};};bc=P.Scheduler=bR.Class({Fork:function(bU){var bV;bV=this;this.robin.push(bU);this.idle?(this.idle=false,a.setTimeout(function(){bV.tick();},0)):void 0;},tick:function(){var bU,bV,bW;bV=this;bW=bT.now();bU=true;while(bU)if(this.robin.length===0){this.idle=true;bU=false;}else{(this.robin.shift())();bT.now()-bW>40?(a.setTimeout(function(){bV.tick();},0),bU=false):void 0;}}},g,bc);bc.New=bR.Ctor(function(){g.New.call(this);this.idle=true;this.robin=[];},bc);be.New=function(bU,bV,bW,bX){var bY;bY={DynElem:bU,DynFlags:bV,DynNodes:bW};bR.SetOptional(bY,"OnAfterRender",bX);return bY;};bf.Insert=function(bU,bV){var bW,bX,bY;function bZ(b0){var b1,b2;while(true)if(!(b0===null)){if(b0!=null&&b0.$==1)return bW.push(b0.$0);else if(b0!=null&&b0.$==2){b1=b0.$1;b2=b0.$0;bZ(b2);b0=b1;}else return b0!=null&&b0.$==3?b0.$0(bU):b0!=null&&b0.$==4?bX.push(b0.$0):null;}else return null;}bW=[];bX=[];bZ(bV);bY=bW.slice(0);return be.New(bU,bf.Flags(bV),bY,bX.length===0?null:{$:1,$0:function(b0){K.iter(function(b1){b1(b0);},bX);}});};bf.Updates=function(bU){return bk.MapTreeReduce(function(bV){return bV.NChanged();},Q.Const(),Q.Map2Unit,bU.DynNodes);};bf.Empty=function(bU){return be.New(bU,0,[],null);};bf.Flags=function(bU){return bU!==null&&bU.hasOwnProperty("flags")?bU.flags:0;};bf.Static=function(bU){return new T({$:3,$0:bU});};bf.Dynamic=function(bU,bV){return new T({$:1,$0:new bC.New(bU,bV)});};bf.EmptyAttr=function(){bB.$cctor();return bB.EmptyAttr;};bf.HasExitAnim=function(bU){var bV;bV=2;return(bU.DynFlags&bV)===bV;};bf.GetExitAnim=function(bU){return bf.GetAnim(bU,function(bV,bW){return bV.NGetExitAnim(bW);});};bf.HasEnterAnim=function(bU){var bV;bV=1;return(bU.DynFlags&bV)===bV;};bf.GetEnterAnim=function(bU){return bf.GetAnim(bU,function(bV,bW){return bV.NGetEnterAnim(bW);});};bf.HasChangeAnim=function(bU){var bV;bV=4;return(bU.DynFlags&bV)===bV;};bf.GetChangeAnim=function(bU){return bf.GetAnim(bU,function(bV,bW){return bV.NGetChangeAnim(bW);});};bf.AppendTree=function(bU,bV){var bW;return bU===null?bV:bV===null?bU:(bW=new T({$:2,$0:bU,$1:bV}),(bf.SetFlags(bW,bf.Flags(bU)|bf.Flags(bV)),bW));};bf.GetAnim=function(bU,bV){return _.Concat(o.map(function(bW){return bV(bW,bU.DynElem);},bU.DynNodes));};bf.Sync=function(bU,bV){o.iter(function(bW){bW.NSync(bU);},bV.DynNodes);};bf.SetFlags=function(bU,bV){bU.flags=bV;};bg.Handler=function(bU,bV){return bf.Static(function(bW){bW.addEventListener(bU,function(bX){return(bV(bW))(bX);},false);});};bg.OnAfterRender=function(bU){return new T({$:4,$0:bU});};bg.Value=function(bU){var bV;bV=(((bw.StringApply())(bU))(bf.Static))(function(bW){return bg.DynamicCustom(bW,bU.get_View());});return T.Append(bV[0],bV[1]);};bg.Checked=function(bU){var bV;bV=(((bw.BoolCheckedApply())(bU))(bf.Static))(function(bW){return bg.DynamicCustom(bW,bU.get_View());});return T.Append(bV[0],bV[1]);};bg.IntValue=function(bU){var bV;bV=(((bw.IntApplyChecked())(bU))(bf.Static))(function(bW){return bg.DynamicCustom(bW,bU.get_View());});return T.Append(bV[0],bV[1]);};bg.IntValueUnchecked=function(bU){var bV;bV=(((bw.IntApplyUnchecked())(bU))(bf.Static))(function(bW){return bg.DynamicCustom(bW,bU.get_View());});return T.Append(bV[0],bV[1]);};bg.FloatValue=function(bU){var bV;bV=(((bw.FloatApplyChecked())(bU))(bf.Static))(function(bW){return bg.DynamicCustom(bW,bU.get_View());});return T.Append(bV[0],bV[1]);};bg.FloatValueUnchecked=function(bU){var bV;bV=(((bw.FloatApplyUnchecked())(bU))(bf.Static))(function(bW){return bg.DynamicCustom(bW,bU.get_View());});return T.Append(bV[0],bV[1]);};bg.Dynamic=function(bU,bV){return bf.Dynamic(bV,function(bW){return function(bX){return bW.setAttribute(bU,bX);};});};bg.DynamicCustom=function(bU,bV){return bf.Dynamic(bV,bU);};bi=bh.T=bR.Class({GetEnumerator:function(){return new X.New(this,null,function(bU){var bV;bV=bU.s;return bV.$==0?false:(bU.c=bV.$0,bU.s=bV.$1,true);},void 0);},GetEnumerator0:function(){return W.Get(this);}},null,bi);bi.Empty=new bi({$:0});bj.concat=function(bU,bV){return o.ofSeq(bV).join(bU);};bj.SplitChars=function(bU,bV,bW){return bj.Split(bU,new a.RegExp("["+bj.RegexEscape(bV.join(""))+"]"),bW);};bj.StartsWith=function(bU,bV){return bU.substring(0,bV.length)==bV;};bj.Split=function(bU,bV,bW){return bW===1?o.filter(function(bX){return bX!=="";},bj.SplitWith(bU,bV)):bj.SplitWith(bU,bV);};bj.RegexEscape=function(bU){return bU.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bj.SplitWith=function(bU,bV){return bU.split(bV);};bj.forall=function(bU,bV){return K.forall(bU,bj.protect(bV));};bj.protect=function(bU){return bU===null?"":bU;};bk.TreeReduce=function(bU,bV,bW){var bX;function bY(bZ){return function(b0){var b1,b2;return b0<=0?bU:b0===1&&(bZ>=0&&bZ<bX)?o.get(bW,bZ):(b2=b0/2>>0,bV((bY(bZ))(b2),(bY(bZ+b2))(b0-b2)));};}bX=o.length(bW);return(bY(0))(bX);};bk.MapTreeReduce=function(bU,bV,bW,bX){var bY;function bZ(b0){return function(b1){var b2,b3;return b1<=0?bV:b1===1&&(b0>=0&&b0<bY)?bU(o.get(bX,b0)):(b3=b1/2>>0,bW((bZ(b0))(b3),(bZ(b0+b3))(b1-b3)));};}bY=o.length(bX);return(bZ(0))(bY);};bk.ofSeqNonCopying=function(bU){var bV,bW;if(bU instanceof a.Array)return bU;else if(bU instanceof bi)return o.ofList(bU);else if(bU===null)return[];else{bV=[];bW=W.Get(bU);try{while(bW.MoveNext())bV.push(bW.Current());return bV;}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}}};bl=h.Updates=bR.Class({},null,bl);bl.Create=function(bU){var bV;bV=null;bV=bl.New(bU,null,function(){var bW;bW=bV.s;return bW===null?(bW=t.Copy(bV.c()),bV.s=bW,t.WhenObsoleteRun(bW,function(){bV.s=null;}),bW):bW;});return bV;};bl.New=function(bU,bV,bW){return new bl({c:bU,s:bV,v:bW});};bm=w.ValueCollection=bR.Class({GetEnumerator$1:function(){return W.Get(K.map(function(bU){return bU.V;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},g,bm);bm.New=bR.Ctor(function(bU){g.New.call(this);this.d=bU;},bm);bo.New=function(bU,bV){return{PreviousNodes:bU,Top:bV};};bp.get_Empty=function(){return{$:0,$0:new J.New$3()};};bp.FindAll=function(bU){var bV;function bW(bZ,b0){var b1,b2,b3,b4,b5;while(true)switch(bZ){case 0:if(b0!=null&&b0.$==0){b2=b0.$1;b3=b0.$0;bW(0,b3);b0=b2;}else if(b0!=null&&b0.$==1){b4=b0.$0;b0=b4;bZ=1;}else if(b0!=null&&b0.$==2){b5=b0.$0;b0=b5.Current;}else return b0!=null&&b0.$==6?(b1=b0.$0.Holes,(function(b6){return function(b7){o.iter(b6,b7);};}(bY))(b1)):null;break;case 1:bV.push(b0);b0=b0.Children;bZ=0;break;}}function bX(bZ){return bW(0,bZ);}function bY(bZ){return bW(1,bZ);}bV=[];bX(bU);return{$:0,$0:new J.New$2(bV)};};bp.Filter=function(bU,bV){return{$:0,$0:bE.Filter(bU,bV.$0)};};bp.Except=function(bU,bV){return{$:0,$0:bE.Except(bU.$0,bV.$0)};};bp.ToArray=function(bU){return bE.ToArray(bU.$0);};bp.Intersect=function(bU,bV){return{$:0,$0:bE.Intersect(bU.$0,bV.$0)};};bq.UseAnimations=function(){by.$cctor();return by.UseAnimations;};bq.Actions=function(bU){return bq.ConcatActions(o.choose(function(bV){return bV.$==1?{$:1,$0:bV.$0}:null;},bz.ToArray(bU.$0)));};bq.Finalize=function(bU){o.iter(function(bV){if(bV.$==0)bV.$0();},bz.ToArray(bU.$0));};bq.ConcatActions=function(bU){var bV,bW,bX,bY;bV=bk.ofSeqNonCopying(bU);bW=o.length(bV);return bW===0?bq.Const():bW===1?o.get(bV,0):(bX=K.max(K.map(function(bZ){return bZ.Duration;},bV)),(bY=o.map(function(bZ){return bq.Prolong(bX,bZ);},bV),bq.Def(bX,function(bZ){o.iter(function(b0){b0.Compute(bZ);},bY);})));};bq.List=function(bU){return bU.$0;};bq.Const=function(bU){return bq.Def(0,function(){return bU;});};bq.Def=function(bU,bV){return{Compute:bV,Duration:bU};};bq.Prolong=function(bU,bV){var bW,bX,bY;bW=bV.Compute;bX=bV.Duration;bY=bI.Create(function(){return bV.Compute(bV.Duration);});return{Compute:function(bZ){return bZ>=bX?bY.f():bW(bZ);},Duration:bU};};br.$cctor=function(){br.$cctor=a.ignore;br.BatchUpdatesEnabled=true;};bt=f.OperationCanceledException=bR.Class({},bs,bt);bt.New=bR.Ctor(function(bU){bt.New$1.call(this,"The operation was canceled.",null,bU);},bt);bt.New$1=bR.Ctor(function(bU,bV,bW){this.message=bU;this.inner=bV;S.setPrototypeOf(this,bt.prototype);this.ct=bW;},bt);bu.$cctor=function(){bu.$cctor=a.ignore;bu.noneCT=bb.New(false,[]);bu.scheduler=new bc.New();bu.defCTS=[new bA.New()];bu.Zero=P.Return();bu.GetCT=function(bU){bU.k({$:0,$0:bU.ct});};};bv.concat=function(bU){var bV,bW;bV=[];for(var bX in bU)bV.push.apply(bV,bU[bX]);return bV;};bw.StringApply=function(){bB.$cctor();return bB.StringApply;};bw.BoolCheckedApply=function(){bB.$cctor();return bB.BoolCheckedApply;};bw.IntApplyChecked=function(){bB.$cctor();return bB.IntApplyChecked;};bw.IntApplyUnchecked=function(){bB.$cctor();return bB.IntApplyUnchecked;};bw.FloatApplyChecked=function(){bB.$cctor();return bB.FloatApplyChecked;};bw.FloatApplyUnchecked=function(){bB.$cctor();return bB.FloatApplyUnchecked;};bw.ApplyValue=function(bU,bV,bW,bX,bY){return[bX(function(bZ){function b0(){bW.UpdateMaybe(function(b1){var b2,b3;b2=bU(bZ);return b2!=null&&b2.$==1&&(!q.Equals(b2.$0,b1)&&(b3=[b2,b2.$0],true))?b3[0]:null;});}bZ.addEventListener("change",b0);bZ.addEventListener("input",b0);bZ.addEventListener("keypress",b0);}),bY(function(bZ){return function(b0){var b1,b2;b1=bU(bZ);return b1!=null&&b1.$==1&&(q.Equals(b1.$0,b0)&&(b2=b1.$0,true))?null:bV(bZ,b0);};})];};bw.StringSet=function(){bB.$cctor();return bB.StringSet;};bw.StringGet=function(){bB.$cctor();return bB.StringGet;};bw.IntSetUnchecked=function(){bB.$cctor();return bB.IntSetUnchecked;};bw.IntGetUnchecked=function(){bB.$cctor();return bB.IntGetUnchecked;};bw.IntSetChecked=function(){bB.$cctor();return bB.IntSetChecked;};bw.IntGetChecked=function(){bB.$cctor();return bB.IntGetChecked;};bw.FloatSetUnchecked=function(){bB.$cctor();return bB.FloatSetUnchecked;};bw.FloatGetUnchecked=function(){bB.$cctor();return bB.FloatGetUnchecked;};bw.FloatSetChecked=function(){bB.$cctor();return bB.FloatSetChecked;};bw.FloatGetChecked=function(){bB.$cctor();return bB.FloatGetChecked;};bx.$cctor=function(){var bU;bx.$cctor=a.ignore;bx.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bx.rtagName=new a.RegExp("<([\\w:]+)");bx.rhtml=new a.RegExp("<|&#?\\w+;");bx.wrapMap=(bU=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:bU,tbody:bU,tfoot:bU,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bx.defaultWrap=[0,"",""];};by.$cctor=function(){by.$cctor=a.ignore;by.CubicInOut=bD.Custom(function(bU){var bV;bV=bU*bU;return 3*bV-2*(bV*bU);});by.UseAnimations=true;};bz.Append=function(bU,bV){return bU.$==0?bV:bV.$==0?bU:{$:2,$0:bU,$1:bV};};bz.ToArray=function(bU){var bV;function bW(bX){var bY,bZ;while(true)if(bX.$==1)return bV.push(bX.$0);else if(bX.$==2){bY=bX.$1;bZ=bX.$0;bW(bZ);bX=bY;}else return bX.$==3?o.iter(function(b0){bV.push(b0);},bX.$0):null;}bV=[];bW(bU);return bV.slice(0);};bz.Concat=function(bU){var bV;bV=bk.ofSeqNonCopying(bU);return bk.TreeReduce(bz.Empty(),bz.Append,bV);};bz.Empty=function(){bJ.$cctor();return bJ.Empty;};bA=f.CancellationTokenSource=bR.Class({},g,bA);bA.New=bR.Ctor(function(){g.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bA);bB.$cctor=function(){var bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3;bB.$cctor=a.ignore;bB.EmptyAttr=null;bB.BoolCheckedApply=bR.Curried3(function(b4,b5,b6){return[b5(function(b7){b7.addEventListener("change",function(){return!q.Equals(b4.Get(),b7.checked)?b4.Set(b7.checked):null;});}),b6(function(b7){return function(b8){b7.checked=b8;};})];});bB.StringSet=function(b4){return function(b5){b4.value=b5;};};bB.StringGet=function(b4){return{$:1,$0:b4.value};};bB.StringApply=(bU=bw.StringGet(),(bV=bw.StringSet(),bR.Curried(bw.ApplyValue,3,[bU,function(b4,b5){return(bV(b4))(b5);}])));bB.IntSetUnchecked=function(b4){return function(b5){b4.value=a.String(b5);};};bB.IntGetUnchecked=function(b4){var b5,b6;b5=b4.value;return bF.isBlank(b5)?{$:1,$0:0}:(b6=+b5,b6!==b6>>0?null:{$:1,$0:b6});};bB.IntApplyUnchecked=(bW=bw.IntGetUnchecked(),(bX=bw.IntSetUnchecked(),bR.Curried(bw.ApplyValue,3,[bW,function(b4,b5){return(bX(b4))(b5);}])));bB.IntSetChecked=function(b4){return function(b5){var b6;b6=b5.get_Input();return b4.value!==b6?void(b4.value=b6):null;};};bB.IntGetChecked=function(b4){var b5,b6,b7;b5=b4.value;return{$:1,$0:bF.isBlank(b5)?(b4.checkValidity?b4.checkValidity():true)?new U({$:2,$0:b5}):new U({$:1,$0:b5}):(b6=(b7=0,[R.TryParseInt32(b5,{get:function(){return b7;},set:function(b8){b7=b8;}}),b7]),b6[0]?new U({$:0,$0:b6[1],$1:b5}):new U({$:1,$0:b5}))};};bB.IntApplyChecked=(bY=bw.IntGetChecked(),(bZ=bw.IntSetChecked(),bR.Curried(bw.ApplyValue,3,[bY,function(b4,b5){return(bZ(b4))(b5);}])));bB.FloatSetUnchecked=function(b4){return function(b5){b4.value=a.String(b5);};};bB.FloatGetUnchecked=function(b4){var b5,b6;b5=b4.value;return bF.isBlank(b5)?{$:1,$0:0}:(b6=+b5,a.isNaN(b6)?null:{$:1,$0:b6});};bB.FloatApplyUnchecked=(b0=bw.FloatGetUnchecked(),(b1=bw.FloatSetUnchecked(),bR.Curried(bw.ApplyValue,3,[b0,function(b4,b5){return(b1(b4))(b5);}])));bB.FloatSetChecked=function(b4){return function(b5){var b6;b6=b5.get_Input();return b4.value!==b6?void(b4.value=b6):null;};};bB.FloatGetChecked=function(b4){var b5,b6;b5=b4.value;return{$:1,$0:bF.isBlank(b5)?(b4.checkValidity?b4.checkValidity():true)?new U({$:2,$0:b5}):new U({$:1,$0:b5}):(b6=+b5,a.isNaN(b6)?new U({$:1,$0:b5}):new U({$:0,$0:b6,$1:b5}))};};bB.FloatApplyChecked=(b2=bw.FloatGetChecked(),(b3=bw.FloatSetChecked(),bR.Curried(bw.ApplyValue,3,[b2,function(b4,b5){return(b3(b4))(b5);}])));};bC=h.DynamicAttrNode=bR.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bU){return _.get_Empty();},NGetEnterAnim:function(bU){return _.get_Empty();},NGetChangeAnim:function(bU){return _.get_Empty();},NSync:function(bU){if(this.dirty){(this.push(bU))(this.value);this.dirty=false;}}},g,bC);bC.New=bR.Ctor(function(bU,bV){var bW;bW=this;g.New.call(this);this.push=bV;this.value=void 0;this.dirty=false;this.updates=Q.Map(function(bX){bW.value=bX;bW.dirty=true;},bU);},bC);bD=h.Easing=bR.Class({},g,bD);bD.Custom=function(bU){return new bD.New(bU);};bD.New=bR.Ctor(function(bU){g.New.call(this);this.transformTime=bU;},bD);bE.Filter=function(bU,bV){return new J.New$2(o.filter(bU,bE.ToArray(bV)));};bE.Except=function(bU,bV){var bW;bW=new J.New$2(bE.ToArray(bV));bW.ExceptWith(bE.ToArray(bU));return bW;};bE.ToArray=function(bU){var bV;bV=o.create(bU.get_Count(),void 0);bU.CopyTo(bV);return bV;};bE.Intersect=function(bU,bV){var bW;bW=new J.New$2(bE.ToArray(bU));bW.IntersectWith(bE.ToArray(bV));return bW;};bh.head=function(bU){return bU.$==1?bU.$0:bh.listEmpty();};bh.tail=function(bU){return bU.$==1?bU.$1:bh.listEmpty();};bh.listEmpty=function(){return j.FailWith("The input list was empty.");};bF.isBlank=function(bU){return bj.forall(bH.IsWhiteSpace,bU);};bG.Children=function(bU,bV){var bW,bX,bY;if(bV!=null&&bV.$==1){bY=[];bW=bV.$0[0].nextSibling;while(bW!==bV.$0[1]){bY.push(bW);bW=bW.nextSibling;}return{$:0,$0:bY};}else return{$:0,$0:o.init(bU.childNodes.length,(bX=bU.childNodes,function(bZ){return bX[bZ];}))};};bG.Except=function(bU,bV){var bW;bW=bU.$0;return{$:0,$0:o.filter(function(bX){return o.forall(function(bY){return!(bX===bY);},bW);},bV.$0)};};bG.Iter=function(bU,bV){o.iter(bU,bV.$0);};bG.DocChildren=function(bU){var bV;function bW(bX){var bY,bZ,b0,b1;while(true){if(bX!=null&&bX.$==2){bZ=bX.$0;bX=bZ.Current;}else if(bX!=null&&bX.$==1)return bV.push(bX.$0.El);else if(bX==null)return null;else if(bX!=null&&bX.$==5)return bV.push(bX.$0);else if(bX!=null&&bX.$==4)return bV.push(bX.$0.Text);else if(bX!=null&&bX.$==6){bY=bX.$0.Els;return(function(b2){return function(b3){o.iter(b2,b3);};}(function(b2){if(b2==null||b2.constructor===S)bW(b2);else bV.push(b2);}))(bY);}else{b0=bX.$1;b1=bX.$0;bW(b1);bX=b0;}}}bV=[];bW(bU.Children);return{$:0,$0:bk.ofSeqNonCopying(bV)};};bH.IsWhiteSpace=function(bU){return bU.match(new a.RegExp("\\s"))!==null;};R.TryParse=function(bU,bV,bW,bX){var bY,bZ;bY=+bU;bZ=bY===bY-bY%1&&bY>=bV&&bY<=bW;bZ?bX.set(bY):void 0;return bZ;};bI.Create=function(bU){return bM.New(false,bU,bI.forceLazy);};bI.forceLazy=function(){var bU;bU=this.v();this.c=true;this.v=bU;this.f=bI.cachedLazy;return bU;};bI.cachedLazy=function(){return this.v;};bJ.$cctor=function(){bJ.$cctor=a.ignore;bJ.Empty={$:0};};bK.Clear=function(bU){bU.splice(0,o.length(bU));};bM.New=function(bU,bV,bW){return{c:bU,v:bV,f:bW};};bR.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
